<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>[eris]&lt;Lisp>Harmony>DLionDomino>SIOSUBS.ASM!1</title>
  </head>
  <body>
    <div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 10pt serif">{File: SIOSubs.asm<br>Modification History:<br>Last change by Jim Frandeen : May 25, 1982  3:57 PM<br>Created by Jim Frandeen : March 25, 1982  8:58 AM<br>}<br><br></span><span class="tab" val="67"></span><span style="font: 10pt serif">Get</span><span class="tab" val="67"></span><span style="font: 10pt serif">"SysDefs.asm"</span><span class="tab" val="67"></span><span style="font: 10pt serif"><br></span><span class="tab" val="67"></span><span style="font: 10pt serif">Get</span><span class="tab" val="67"></span><span style="font: 10pt serif">"CommonDefs.asm"</span><span class="tab" val="67"></span><span style="font: 10pt serif"><br></span><span class="tab" val="67"></span><span style="font: 10pt serif">Get</span><span class="tab" val="67"></span><span style="font: 10pt serif">"RS232CDefs.asm"</span><span class="tab" val="67"></span><span style="font: 10pt serif"><br><br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IMP</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerValue</span><span class="tab" val="67"></span><span style="font: 10pt serif">;From RS232CInterrupts<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IMP</span><span class="tab" val="67"></span><span style="font: 10pt serif">CurrentRS366Status</span><span class="tab" val="67"></span><span style="font: 10pt serif">;From RS232CMisc<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IMP</span><span class="tab" val="67"></span><span style="font: 10pt serif">RxWR1</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;From Rs232CMisc<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IMP</span><span class="tab" val="67"></span><span style="font: 10pt serif">RxWR3</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;From Rs232CMisc<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IMP</span><span class="tab" val="67"></span><span style="font: 10pt serif">RxWR4</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;From Rs232CMisc<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IMP</span><span class="tab" val="67"></span><span style="font: 10pt serif">TxWR1</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;From Rs232CMisc<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IMP</span><span class="tab" val="67"></span><span style="font: 10pt serif">TxWR4</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;From Rs232CMisc<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IMP</span><span class="tab" val="67"></span><span style="font: 10pt serif">TxWR5</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;From Rs232CMisc<br><br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsynchronousDivisor<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerCounter<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerStoppedFlag<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">BisyncTimerTable<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">HLPlus2A<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">ResetChannels<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">SetAsyncTimer<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">SetBaudRate<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">SetRS366<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">SynchronousDivisor<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EXP</span><span class="tab" val="67"></span><span style="font: 10pt serif">TestAsyncTimer<br>;<br>SetAsyncTimer:<br>{This entry is called whenever a new timeout value is set. This is called by Misc when we get a SetParameters command. The client supplies the timeout value in RS232CParameer4. We set the TimerStoppedFlag.}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">STA</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerStoppedFlag</span><span class="tab" val="67"></span><span style="font: 10pt serif">; set/reset timer stopped flag<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">SHLD</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerValue</span><span class="tab" val="67"></span><span style="font: 10pt serif">; set initial iteration counter value<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">SHLD</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerCounter</span><span class="tab" val="67"></span><span style="font: 10pt serif">; set iteration counter<br><br>StartAsyncTimer:<br>{This entry is called by TestAsyncTimer when we get a timeout. We restart the timer.}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MVI</span><span class="tab" val="67"></span><span style="font: 10pt serif">A,0B0H</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;timer channel 2, mode 0, binary<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">OUT</span><span class="tab" val="67"></span><span style="font: 10pt serif">TimerMode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">LXI</span><span class="tab" val="67"></span><span style="font: 10pt serif">H,TimerCount2+8000H<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MVI</span><span class="tab" val="67"></span><span style="font: 10pt serif">M,0FEH</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;Send low byte of 1840 decimal<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MVI</span><span class="tab" val="67"></span><span style="font: 10pt serif">M,47H</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;Send high byte<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">RET<br><br>TestAsyncTimer:<br>{This entry is called by the Async Get Loop while we are waiting for the interrupt routine to fill a frame. When we get a timeout, we end the current frame. Note that we will not get a timeout until we have received at least one character because the TimerStoppedFlag is set until we receive the first character. When we return:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">Condition Flag = Zero if timeout<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">Condition Flag # Zero if no timeout<br>}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DB</span><span class="tab" val="67"></span><span style="font: 10pt serif">opMVIA</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;A &larr; AsyncTimerStoppedFlag<br>AsyncTimerStoppedFlag:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DB</span><span class="tab" val="67"></span><span style="font: 10pt serif">0<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">ORA</span><span class="tab" val="67"></span><span style="font: 10pt serif">A<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">RNZ</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; if timer not running<br><br>{Continue if timer is running. AsyncTimerStoppedFlag=0.}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">IN</span><span class="tab" val="67"></span><span style="font: 10pt serif">IntReq</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; read timer service request register<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">ANI</span><span class="tab" val="67"></span><span style="font: 10pt serif">MiscTimerReqMask</span><span class="tab" val="67"></span><span style="font: 10pt serif">; test timer output<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">RNZ</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; if timer output not active (Z flag false!)<br><br>{Continue if 1 msc timeout.}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">CALL</span><span class="tab" val="67"></span><span style="font: 10pt serif">StartAsyncTimer</span><span class="tab" val="67"></span><span style="font: 10pt serif">; restart timer chip<br><br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DB</span><span class="tab" val="67"></span><span style="font: 10pt serif">opLXIH</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;HL &larr; AsyncTimerCounter<br>AsyncTimerCounter:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">0<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DCX</span><span class="tab" val="67"></span><span style="font: 10pt serif">H</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; update iteration counter<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MOV</span><span class="tab" val="67"></span><span style="font: 10pt serif">A,L<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">ORA</span><span class="tab" val="67"></span><span style="font: 10pt serif">H<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">JNZ</span><span class="tab" val="67"></span><span style="font: 10pt serif">TestAsyncTimer10</span><span class="tab" val="67"></span><span style="font: 10pt serif">; if iteration counter not exhausted<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">LHLD</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerValue</span><span class="tab" val="67"></span><span style="font: 10pt serif">; - else restart with initial value<br><br>TestAsyncTimer10:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">SHLD</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerCounter</span><span class="tab" val="67"></span><span style="font: 10pt serif">; update iteration counter<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">RNZ</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;No timeout<br><br>{Continue if timeout. Set the TimerStoppedFlag.}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">CMA</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;A &larr; FF<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">STA</span><span class="tab" val="67"></span><span style="font: 10pt serif">AsyncTimerStoppedFlag</span><span class="tab" val="67"></span><span style="font: 10pt serif">; set timer stopped flag<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">RET</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Z flag set if timeout occurred<br>;<br>ResetChannels:<br>{Reset Rx and Tx channels. If the DMA Channel2 is being used for Rx, or if DMA Channel3 is being used for Tx, disable these also. This subroutine is called by Off and by SetParameters.}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MVI</span><span class="tab" val="67"></span><span style="font: 10pt serif">A,ChannelReset<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DI<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">OUT</span><span class="tab" val="67"></span><span style="font: 10pt serif">TxCont<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">OUT</span><span class="tab" val="67"></span><span style="font: 10pt serif">RxCont<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">EI<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">RET<br>;<br>SetBaudRate:<br>{ This Routine sets the Frequency Divisor and Oscillation Mode for the i8253 Programmable Interval Timer. Counter #1 of i8253 is used for the Tx Clock generator, #2 is used for the Rx generator.On entry, HL points to Baud rate divisor table: AsynchronousDivisor or SynchronousDivisor.}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">CALL</span><span class="tab" val="67"></span><span style="font: 10pt serif">HLPlus2A<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MVI</span><span class="tab" val="67"></span><span style="font: 10pt serif">A,OSCCMD</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Frequncy and Mode Set to i8253 <br></span><span class="tab" val="67"></span><span style="font: 10pt serif">OUT</span><span class="tab" val="67"></span><span style="font: 10pt serif">OSCCont</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Counter#1, LSB & MSB, Mode3, Binary<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MOV</span><span class="tab" val="67"></span><span style="font: 10pt serif">A,M</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; A &larr; ((H,L))<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">OUT</span><span class="tab" val="67"></span><span style="font: 10pt serif">OSCReg<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">INX</span><span class="tab" val="67"></span><span style="font: 10pt serif">H</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; H,L &larr; (H,L)+1<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MOV</span><span class="tab" val="67"></span><span style="font: 10pt serif">A,M</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; A &larr; ((H,L))<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">OUT</span><span class="tab" val="67"></span><span style="font: 10pt serif">OSCReg<br>{Fall through to SetRS366}<br><br>SetRS366:<br>{Set the RS366 register to the value in A. We do this for the SetRS366Status command. This comes from the SetStatus366 procedure in the head. Parameter bits are as follows:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">10</span><span class="tab" val="67"></span><span style="font: 10pt serif">callRequest<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">11</span><span class="tab" val="67"></span><span style="font: 10pt serif">digitPresent<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">12..15</span><span class="tab" val="67"></span><span style="font: 10pt serif">digit<br>The two high order bits are not disturbed:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">8</span><span class="tab" val="67"></span><span style="font: 10pt serif">test loop back enable bit<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">9</span><span class="tab" val="67"></span><span style="font: 10pt serif">local OSC Enable bit<br>}<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">XRI</span><span class="tab" val="67"></span><span style="font: 10pt serif">RS366InvMask</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;30H<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MOV</span><span class="tab" val="67"></span><span style="font: 10pt serif">D,A<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">LDA</span><span class="tab" val="67"></span><span style="font: 10pt serif">CurrentRS366Status</span><span class="tab" val="67"></span><span style="font: 10pt serif">; Read Current RS366 Status<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">ANI</span><span class="tab" val="67"></span><span style="font: 10pt serif">RS366ResetMask</span><span class="tab" val="67"></span><span style="font: 10pt serif">; Save Loop connection and Clock Sel.<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">ORA</span><span class="tab" val="67"></span><span style="font: 10pt serif">D<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">OUT</span><span class="tab" val="67"></span><span style="font: 10pt serif">RS366Reg<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">RET<br>;<br>HLPlus2A:<br>{ On entry:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">A = number to add to HL.<br>On exit:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">HL = HL + 2A }<br><br></span><span class="tab" val="67"></span><span style="font: 10pt serif">ADD</span><span class="tab" val="67"></span><span style="font: 10pt serif">A</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;A*2 Makes Table Reference Address<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MOV</span><span class="tab" val="67"></span><span style="font: 10pt serif">E,A<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">MVI</span><span class="tab" val="67"></span><span style="font: 10pt serif">D,0<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DAD</span><span class="tab" val="67"></span><span style="font: 10pt serif">D</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">;HL &larr; (H,L)+(B,C)<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">RET<br><br>AsynchronousDivisor:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">2304</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 50Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">1536</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 75Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">1047</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 110Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">856</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 134.5Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">768</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 150Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">384</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 300Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">192</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 600Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">96</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 1200Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">48</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 2400Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">32</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 3600Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">24</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 4800Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">16</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 7200Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">12</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 9600Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">6</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 19200Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">3</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 38400Hz Asynchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">2</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 57600Hz Asynchronus mode<br><br>SynchronousDivisor:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">36864</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 50Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">24576</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 75Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">16756</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 110Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">13704</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 134.5Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">12288</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 150Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">6144</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 300Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">3072</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 600Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">1536</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 1200Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">768</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 2400Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">512</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 3600Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">384</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 4800Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">256</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 7200Hz Synchronus mode<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">192</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; Divisor for 9600Hz Synchronus mode<br><br>BisyncTimerTable:<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">50</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 50Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">75</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 75Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">110</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 110Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">135</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 134.5Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">150</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 150Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">300</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 300Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">600</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 600Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">1200</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 1200Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">2400</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 2400Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">3600</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 3600Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">4800</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 4800Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">7200</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 7200Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">9600</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 9600Baud 1 Sec<br></span><span class="tab" val="67"></span><span style="font: 10pt serif">DW</span><span class="tab" val="67"></span><span style="font: 10pt serif">19200</span><span class="tab" val="67"></span><span class="tab" val="67"></span><span style="font: 10pt serif">; 19200Baud 1 Sec<br><br></span><span class="tab" val="67"></span><span style="font: 10pt serif">END<br><br></span></div>
<script>function do_tabs() { // unit = px
  var tabs = document.getElementsByClassName("tab");
  for (var i = 0; i < tabs.length; ++i) {
    var span = tabs[i];
    var val = span.getAttribute("val");
    if (val == null) console.log("Couldn't get val");
    var rect = span.getBoundingClientRect();
    var tabstop;
    if (val > 0) tabstop = Math.ceil(rect.left / val) * val;
    else tabstop = -val;
    console.log("do_tabs", val, tabstop)
    if (tabstop > 0) {
      var width = tabstop - rect.left;
      span.style.display = "inline-block";
      span.style.width = width + "px";
    }
  }
}
do_tabs();
</script>
  </body>
</html>
