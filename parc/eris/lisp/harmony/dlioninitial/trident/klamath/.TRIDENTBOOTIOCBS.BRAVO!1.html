<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>[eris]&lt;Lisp>Harmony>DlionInitial>Trident>Klamath>TRIDENTBOOTIOCBS.BRAVO!1</title>
  </head>
  <body>
    <div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 8pt serif">;TridentBootIOCBs.bravo  <br>;last edited by Neely February 2, 1982  4:21 PM - Add IOCB.tries for initial retries  <br>;last edited by Neely January 13, 1982  6:28 PM - Fix boot from 1,2,or3 bug  <br>;last edited by Neely December 31, 1981  3:14 PM - Fix bug in DataParam  <br>;created by Neely December 7, 1981  1:40 PM <br><br>;IOCBs and CSB used in trident booting. <br>;  There is one IOCB. DCB[0] points at it. DCB[0] can be and is used for all drives. <br>;  Based on the boot drive, the BitSignAdr is merged into<br>;        seekParam, headerParam, dataParam, and the r/v forms of labelParam(42/46).<br>;  Its initial value in the vrr IOCB are for vrr of page 0. <br><br></span><span class="tab" val="77"></span><span style="font: 8pt serif">@100</span><span class="tab" val="77"></span><span style="font: 8pt serif">;data area<br>;  ********  IOCB for vrr  ********<br>#01</span><span class="tab" val="77"></span><span style="font: 8pt serif">B</span><span class="tab" val="77"></span><span style="font: 8pt serif">;0:      special block type =ignore.  Also IOCB.clientHeader.cylinder<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">FE</span><span class="tab" val="77"></span><span style="font: 8pt serif">;1:      word count.  Also IOCB.clientHeader.{head, sector}<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;2:      unused<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;3:      unused<br> </span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;4-5:   IOCB.dataPtr {low, high}<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0060</span><span class="tab" val="77"></span><span style="font: 8pt serif">;6:      IOCB.tries 96 total retries during initial<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;7:      IOCB.pageCount<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;8-9:   IOCB.deviceStatus<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0000 0000 ;A-B:   IOCB.diskHeader [microcode gets header from here also]<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;C:      unused<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0000</span><span class="tab" val="77"></span><span style="font: 8pt serif">;D:      IOCB.microNext<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0000</span><span class="tab" val="77"></span><span style="font: 8pt serif">;E:      IOCB.dcbOffset<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0000</span><span class="tab" val="77"></span><span style="font: 8pt serif">;F:      IOCB.filePageLo<br><br>;  IOCB.seekParam<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0000</span><span class="tab" val="77"></span><span style="font: 8pt serif">;10:     .transferMask<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0000</span><span class="tab" val="77"></span><span style="font: 8pt serif">;11:     .kDrive  no recal needed [BitSignAdr will be merged here] <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0C00</span><span class="tab" val="77"></span><span style="font: 8pt serif">;12:     .kCyl<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0C00</span><span class="tab" val="77"></span><span style="font: 8pt serif">;13:     .kHead<br>;  IOCB.headerParam<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0117</span><span class="tab" val="77"></span><span style="font: 8pt serif">;14:     .op=headerVerify, incrDataPtr=TRUE, firstIOCB=TRUE<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">2C44</span><span class="tab" val="77"></span><span style="font: 8pt serif">;15:     .command<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0083</span><span class="tab" val="77"></span><span style="font: 8pt serif">;16:     .control [BitSignAdr will be merged here]<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0E00</span><span class="tab" val="77"></span><span style="font: 8pt serif">;17:     .errorMask<br>;  IOCB.labelParam<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0 0 0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;18-1B:  set dynamically for vrr/vvr (see 40 & 44 below)<br>;  IOCB.dataParam<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">000E</span><span class="tab" val="77"></span><span style="font: 8pt serif">;1C:     .op=dataRead<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">2C44</span><span class="tab" val="77"></span><span style="font: 8pt serif">;1D:     .command<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">008E</span><span class="tab" val="77"></span><span style="font: 8pt serif">;1E:     .control [BitSignAdr will be merged here]<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0600</span><span class="tab" val="77"></span><span style="font: 8pt serif">;1F:     .errorMask<br><br>;  IOCB.clientLabel  20 - 29<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0 0 0 0<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0 0 0 0<br>; unused during boot<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0 0 0 0 0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;2A-2F:   <br><br>;  IOCB.diskLabel  30 - 39<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0 0 0 0<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0 0 0 0<br>; unused during boot<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 0 0 0 0 0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;3A-3F:   <br><br>; The following are used to switch between label read and label verify<br>;  label read param<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">000A</span><span class="tab" val="77"></span><span style="font: 8pt serif">;40:     .op=labelRead<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">2C44</span><span class="tab" val="77"></span><span style="font: 8pt serif">;41:     .command<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">008C</span><span class="tab" val="77"></span><span style="font: 8pt serif">;42:     .control [BitSignAdr will be merged here]<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0600</span><span class="tab" val="77"></span><span style="font: 8pt serif">;43:     .errorMask<br>;  label verify param<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">000B</span><span class="tab" val="77"></span><span style="font: 8pt serif">;44:     .op=labelVerify<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">2C44</span><span class="tab" val="77"></span><span style="font: 8pt serif">;45:     .command<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0085</span><span class="tab" val="77"></span><span style="font: 8pt serif">;46:     .control [BitSignAdr will be merged here]<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0E00</span><span class="tab" val="77"></span><span style="font: 8pt serif">;47:     .errorMask<br><br>; ********  initial CSB  ********<br>; Can and do use DSB(0) even for any boot drive because the microcode gets all<br>;  necessary info from the IOCB. <br><br>; DSB (0)<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;48:     .pilotNext   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0</span><span class="tab" val="77"></span><span style="font: 8pt serif">;49:     .microNext <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;4A:     .pilotTail   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">C000 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;4B:     .recalibrate=1, .selectMask=8, .type=0, .dcbOffset=0   <br>; DSB (1)<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;4C:     .pilotNext   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;4D:     .microNext   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;4E:     .pilotTail   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">A004 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;4F:     .recalibrate=1, .selectMask=4, .type=0, .dcbOffset=4   <br>; DSB (2)<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;50:     .pilotNext   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;51:     .microNext   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;52:     .pilotTail   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">9008 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;53:     .recalibrate=1, .selectMask=2, .type=0, .dcbOffset=8   <br>; DSB (3)<br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;54:     .pilotNext   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;55:     .microNext   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">0 </span><span class="tab" val="77"></span><span style="font: 8pt serif">;56:     .pilotTail   <br></span><span class="tab" val="77"></span><span style="font: 8pt serif">880A </span><span class="tab" val="77"></span><span style="font: 8pt serif">;57:     .recalibrate=1, .selectMask=1, .type=0, .dcbOffset=A   <br><br></span></div>
<script>function do_tabs() { // unit = px
  var tabs = document.getElementsByClassName("tab");
  for (var i = 0; i < tabs.length; ++i) {
    var span = tabs[i];
    var val = span.getAttribute("val");
    if (val == null) console.log("Couldn't get val");
    var rect = span.getBoundingClientRect();
    var tabstop;
    if (val > 0) tabstop = Math.ceil(rect.left / val) * val;
    else tabstop = -val;
    console.log("do_tabs", val, tabstop)
    if (tabstop > 0) {
      var width = tabstop - rect.left;
      span.style.display = "inline-block";
      span.style.width = width + "px";
    }
  }
}
do_tabs();
</script>
  </body>
</html>
