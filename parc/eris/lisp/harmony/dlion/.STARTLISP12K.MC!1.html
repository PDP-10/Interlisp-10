<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [eris]&lt;Lisp>Harmony>Dlion>STARTLISP12K.MC!1</title>
  </head>
  <body>
    <pre>
{File name:  StartLisp12K.mc don 29-Dec-83 10:17:06last modified by don    13-Mar-84 14:58:44 added logoutlast modified by don    8-Feb-84 18:29:05 for LCS }Reserve[0F6F]; Reserve[0F78]; Reserve[0F7F,0FFF];	{Kernel}SetTask[0];StartAddress[Germ];Germ:	rhTT &larr;  0, CANCELBR[SetMDS,0F],	c1, at[0,2,Germ];	rhTT &larr;  0, CANCELBR[SetMDS,0F],	c1, at[1,2,Germ];SetMDS:	TT &larr; 0FF,	c2;	TT{0FF00} &larr; TT LRot8,	c3;	Rx &larr; 40,	c1;	Rx &larr; Rx LRot8,	c2;	uPageFault &larr; 0{notFaulting},	c3;	Map &larr; [rhTT,TT],	c1;	MDR &larr; Rx{4000} or {0B1}31,	c2;	Q &larr; 0,	c3;	L &larr; 41,	c1;	IOPCtl &larr; IOPInMode,	c2;	DCtl &larr; L LRot0,	c3;	uWP &larr; 0, ClrIntErr,	c1;	TOS &larr; 0, rhMDS &larr; 0	c2;	rhTT &larr; TT &larr; uIOPage,	c3;{set all keys up; 1403D thru 14043 &larr; -1}	stackP &larr; 0,	c1;	T &larr; 0FF LShift1, SE &larr; 1,	c2;	Q &larr; 7,	c3;KeyLoop:	MAR &larr; [rhTT,IOPage.keyBitsm1+Q], BRANCH[$,KeyDone],	c1;	MDR &larr; L xor ~L, CANCELBR[$,0],	c2;	Q &larr; Q - 1, ZeroBr, GOTO[KeyLoop],	c3;KeyDone:	{KCtl &larr; 0,} PC &larr; 0+0+1, CANCELBR[$,0],	c2;	uWDC &larr; PC,	c3;	MAR &larr; [rhTT, IOPage.DSCB.fieldCmd+0],	c1;	MDR &larr; L,	c2;	,	c3;LastChance:	MAR &larr; [rhTT, IOPage.DSCB.syncCmd+0],	c1;	MDR &larr; L,	c2;	L &larr; 0,	c3;	,	c1;	rhTT &larr; 41, TT &larr; 41-1,	c2;	TT{14000} &larr; TT LRot8,	c3;	TT &larr; TT{14000} +IOPage.MP,	c1;	Noop,	c2;	Noop,	c3;	Rx &larr; LH.FMP,	c1;	Rx &larr; Rx LRot8,	c2;	Rx &larr; Rx or RH.FMP,	c3;	MAR &larr; [rhTT, TT+0],	c1;	MDR &larr; Rx or 1,	c2;	Rx &larr; 080,	c3;{ShowDisplay:}BegSD:	Noop, CANCELBR[$, 0F],	c1;	Rx &larr; 1 RRot1, rhRx &larr; 1, {CANCELBR[$, 1],}	c2;	Rx{4000} &larr; Rx RShift1,	c3;	MAR &larr; [rhRx, 0EB+0],	c1;	Noop{MDR &larr; 0},	c2;	TT &larr; 88,	c3;	MAR &larr; [rhRx, 0EC+0],	c1;	MDR &larr; uFF00{was 0},	c2;	TT &larr; TT LRot8,	c3;	MAR &larr; [rhRx, 0ED{0EF}+0],	c1;	MDR &larr; TT{88} or 22,	c2;	PC &larr; 1 + PC + PC16,	c3;	Noop, {MAR &larr; [rhRx, 0E9+0],}	c1;	Q &larr; 71, {MDR &larr; 0,} {IBDisp,}	c2;	DCtl&larr;Q LRot0, {L2 &larr; L2.0, DISPNI[OpTable],}	c3;	,	c1;	,	c2;	Rx &larr; 080,	c3;Stall:	BRANCH[Stall0, Stall1],	c1;Stall0:	GOTO[StallJn],	c2;Stall1:	Rx &larr; Rx  - 1, ZeroBr, GOTO[StallJn],	c2;StallJn:	Q &larr; Q  - 1, ZeroBr, BRANCH[Stall, $],	c3;SkipBurd:	Noop, CANCELBR[SkipBurdock, 0F],	c1;Burdock:	IOPCtl &larr; 1, CANCELBR[$, 0F],	c1;	Noop, GOTO[Burd3],	c2;SkipBurdock:	Noop,	c2;Burd3:	GOTO[LispFloatInit],	c3;LispFloatInitDone:	Bank &larr; LispStartBank,				c1, at[LispStart];	Noop,							c2;	CROSS[LispStart],				c3;	Off:	MAR &larr; [rhRx, IOPage.ProcessorCommand+0],	c1, at[LOGOUT];	MDR{4} &larr;  4,	c2;	Noop,  GOTO[Off],	c3;		{END}</pre>
  </body>
</html>
