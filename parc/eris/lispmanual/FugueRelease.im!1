To: LispCore^============================================================Subject: Update to "Fugue" Alpha TestTo: LispFriends^.PAcc: LispUsers^.PAFrom: LispSupport.PAReply-To: LispSupport.PAThis message announces an update to the Fugue (Interlisp-D) system. An updated release message is included:CHANGESMajor changes since the previous release message include:> support for all fixed disks on 1108 (Dandelion), including  SA1000, SA4000, Q2040 > Lisp SYSOUTs made on any of (Dolphin, Dorado, Dandelion) can be directly  installed on another> On Dolphin and Dorado, Lisp can access ALL Alto partitions> Substantial improvements to reliability on Dandelion> NS protocol, ClearingHouse, Interpress, Printing support included> Mesa 10.0 compatible initial microcode released> new versions of various utilities includedUPDATED RELEASE MESSAGE------------------------------------------The Interlisp-D group is pleased to announce the the availability of a new version of Interlisp-D (Fugue) for system testing. This version will run on the Dandelion processor as well as the Dolphin and Dorado.This version is available for testing, demonstration, and internal Xerox use. There are still major performance enhancements in the Dandelion microcode which we expect to be completed before release; the system is ready, however, for serious testing. Key features of this release are:  * Complete compatibility between Dandelion and Dolphin and Dorado. It is    possible to take ANY Interlisp-D program and move it directly from one    machine to another.   * Dandelion Interlisp-D is implemented solely in microcode and Interlisp-D;    it has no Mesa and no BCPL and fits in the standard 4K control store. It is    booted from the rigid disk by a slightly generalized Initial microcode. It    can be installed from floppy disks or from a file server using the    procedures outlined below.   * Inclusion of PROCESSWORLD, CHAT, DEDIT, TTYIN in standard system, as well as    Lisp drivers for both 10MB (on Dandelion and Dolphin) and 3MB ethernet    (on Dolphin and Dorado), level 1 of PUP and XNS protocols, and full    Leaf based remote filing, hardcopy of text and graphics and bitmaps    to press printers.   * full virtual memory support on Dandelion, with swapping from local disk.    On Dandelion, Interlisp requires a Pilot Logical Volume of at least 8000    pages and can coexist on a Pilot Physical Volume with other     Logical Volumes, space permitting.   * Even with none of the perfomance enhancements planned for June (microcode    support for CONS, RECLAIM, arithmetic, etc), the system is very responsive;    many operations feel significantly faster than a Dolphin.This version of Interlisp-D is known as "Fugue".  Sources and internal implementation are found on [Phylum]<LispCore>Sources> and Phylum]<LispCore>Fugue>.  To run in this system, obtain NEW VERSIONS of the following files from [Phylum]<LispCore>Fugue>:for Dolphin:		Lisp.run, DolphinLispMC.ebfor Dorado:		Lisp.run, DoradoLispMC.ebfor Dandelion:		Lisp10SAx000Initial.db (see installation instructions)for all systems:	Lisp.sysoutIn addition to the standard loadup, there is a system with a large number of the Interlisp-D Graphics demonstrations loaded, called "DEMO.SYSOUT". Instructions for using Interlisp-D on Dolphins and Dorados remains unchanged; instructions for Dandelions is given below.Users not close to Phylum, note: many of the files are quite large, such that installing directly across the net might be risky. Local site maintainers who would like local caching of [phylum]<LispCore>Fugue>, please notify LispSupport.PA. We are establishing a regular BROWNIE run which would update remote directories.CONVERSIONIMPORTANT:  Please read the UPDATED VERSION of [Phylum]<LispCore>Fugue>PROC.PRESS for important information about running in the process world before converting to Fugue. Please read [Phylum]<LispCore>Fugue>NEWETHER.TTY for important information about converting existing low-level PUP code to Fugue. HARDWARE RESTRICTIONSThis version (Fugue.0b) supports Dandelion processor with 1.5 MB (768K) memory, and rigid disks 10MB SA1000, 29MB SA4000, 40MB Quantum 2040. Other memory configurations will be supported in the near future.SCHEDULE AND INFORMATIONRelease of Fugue is scheduled for June 30, 1983.  Updates to released files will continue to be made frequently.Information to users of Fugue will be sent via the distribution list LispFriends^.PA.  If you would like to be on this list and are not, please send a message to Owners-LispFriends^.PA.PROBLEMSAs usual, please submit all problem reports, questions, requests for features via the Laurel/Grapevine mail system to LispSupport.PA. The Interlisp-D Group	----------------------------------------------------------------Details:KEYBOARD & MOUSEOn the Dandelion, Interlisp-D supports both the two-button and the three-button mouse. The "center" key on the upper left hand side of the terminal is interpreted the same as having the middle mouse button.On the standard Dandelion/Star keyboard, the shiftlock is always released by holding down either shift key.   The function RAISE(0) overrides the physical shiftlock key which comes unlocked too easily by the use of either shift key. In addition, some familiar characters are generated by unfamiliarly labled keys:	Ctrl	= Props (next to left shift)	\	= Font	|	= shift-Font	_	= right quote	^	= shift-right-quote	tab	= key with underscored right arrow	esc	= key above tab on lefthand side of keyboard with right arrow	bs	= key at upper right with left-arrowAs noted in previous release messages, Interlisp-D supports redefinition of they key actions via the KEYACTION function. FILINGThis version (Fugue.0b) on Dandelion only supports filing via Leaf. Support for filing to NS file servers and to local disk will be available in a maintenance release. Progress has been more rapid than expected, and at least a test version of NS filing may be availble in the initial release. Currently, however, except for swapping from local rigid disk, local files cannot be read, written, created or deleted. The device "{DSK}" is made into a "core" device, which supports all file operations, but the files are not saved permanently between system restarts. RAID, TRAPS, and other problemsOn the Dandelion, there is no BCPL runtime to support an independent address space debugger. Calls to RAID, unimplemented SUBRS and page traps show up as the system halting with a specific number in the maintenance panel. Problem reports should include the maintenance panel code if relevant, and also the code which appears after pressing the "Undo" key on the righthand side of the keyboard. If at a micro-breakpoint with non-zero in the maintenance panel, the red "Stop" key will perform the same operation that control-D from RAID does in BCPL-based Interlisp-D on Dolphins and Dorados.We are developing a version of Tele-RAID which will enable remote low-level system debugging; details which will allow the implementors to debug remote machines will be provided shortly.NEW FEATURES(SETMAINTPANEL n)	Sets the number in the maintenance panel to be "n". E.g.,			SETMAINTPANEL(1108).(BEEPON n)		Turn on the tone generator in the keyboard with frequency			n. E.g., (BEEPON 440) will start a continuous "A".(BEEPOFF)		Turn off the tone generator.(KEYACTION --	)	The functions for setting actions on various up and down			keystrokes know about all of the keys on the standard			Dandelion keyboard, with names corresponding to the			names printed on them:			AGAIN, FIND, SAME, OPEN, DELETE (= DEL), COPY, MOVE,			PROP'S (= ctrl), CENTER (= middle mouse), BOLD, 			ITALICS, UNDERLINE, SUPERSCRIPT, SUBSCRIPT, LARGER/SMALLER			DEFAULTS, NEXT, EXPAND, HELP, MARGINS, FONT (= \|), 			KEYBOARD, UNDO, STOP (= blank-bottom).(LOGOUT --)		On a Dandelion, the LOGOUT will simulate an "Alt-Boot-1"			(see below.) ------------------------------------DEDITThe long awaited, much deferred, new version of DEdit is now included in the standard LISP.SYSOUT. The new version is a complete internal rework and should be much more fast, space efficient and reliable. Storage is reduced by 50%; the history list no longer preserves DEdit internal structures; printing (and most everything else) is faster; and virtually all known bugs have been fixed.NEW FEATURES:In addition to numerous bug-fixes, the following new features are available:A Break command (does a BREAKIN AROUND the current expression). Subcommands on Edit allow multiple options of using DEDIT, TTYIN, or the TTY (old) editor on either the current expression or its definition.EDITMODE now takes TELETYPE instead of STANDARD to describe the "TTY" editor of chapter 9 of the Reference Manual. STANDARD will also be accepted for a while.DP now allows a second argument which it will interpret as a property to be edited, i.e. DP(FOO MACRO). The single argument form gets the whole property list as before.Shift selection remains active even when DEdit is not. Thus one can unread particularly choice pieces of text from DEdit windows into the typescript window.  (Selections are otherwise disabled when they would be inappropriate, e.g. under nested computations).The ^Y read macro (immediate EVAL) now works under DEdit read. This allows one to typein and evaluate an expression under DEdit without trafficing with the DEdit command menu.One can now give TTY editor commands directly into the typein buffer. A read macro on ^Z will interpret the rest of the line as an EditCom which will be interpreted when the line is closed. Likewise,you may enjoy ^S (Substitute old new) and ^F (Find) commands. Commands are defined by editing the variable DEDITTYPEINCOMS in what should be a fairly obvious way, and then RESETDEDITing. These various changes allow the user to write arbitrary programmed transformations to use under DEDIT since the full programmable power of the TTY editor is available.Facilities now exist for users adding commands to and reorganizing the edit command window. Details on request.(RESETDEDIT) will completely reinitialize DEdit if it gets badly scrambled.----------------------------------------------------------------------------Instructions for running Interlisp-D on DandelionA) installing LISP.SYSOUT with Othello:Othello is the  Mesa development environment utility for managing Pilot Volumes as documented in "Mesa User's Guide" from Office Systems Division.  The Mesa User's Guide also documents "Getting started".  Othello can be used to install Interlisp-D. You must first start by booting the Othello utility on your dandelion. To boot (start) a Dandelion, locate the maintenance panel under the floppy drive.  Next to the red numbers you will find two buttons, labelled "B Reset" and "Alt B".  Press the left boot button, and wait about a minute while diagnostics run until the installed boot program appears.  If you want to skip over diagnostics you can do an "Alt-Boot-1", otherwise known as a "One Boot".  This is done by pressing both buttons, then releasing the left button. The lights will cycle from 1 to 10 until you let go of the button: these are the boot options.  To boot from the hard disk without diagnostics release the right button when 0001 is displayed by the maintenance panel lights.The program you start may be Othello, Star, Tajo or nothing.  If you don't get Othello from the hard disk, you may be able to boot Othello from the Ethernet. Try an "Alt-Boot-3" -- i.e., press both buttons, release left button, wait until the lights show 0003, and then release the right button. After a few minutes, you should be in Othello. If you cannot boot from the Ethernet you will need an Othello 10.0 bootable floppy.  Insert it into your floppy drive, label side up, close the drive panel, and follow the directions above for the two-fingered booting, except that you must now wait until "0002" is displayed before releasing the right button.Othello will display a herald, e.g.:Othello 10.0 of  1-Mar-83 18:06:30 PSTProcessor = 0AA001EE1H = 25200017347B = 2-852-134-631Memory size = 1536K bytes = 768K words > OnlineDrive name: RD0Type a "carriage return" to the Online command after RD0. If you have never installed Lisp on this machine before, you will need to reconfigure the disk into logical volumes with a Lisp volume sufficient to hold Interlisp-D.  Use the "Login" command to log in with your name and password:> LoginUser: Masinter.PAPassword: ******The command:> @[phylum]<LispCore>Fugue>PartitionLisp.othellowill configure the disk into two logical volumes, one of 800 pages called Othello, and the rest of the disk in the second volume, Lisp. This command file will also install Othello into the first volume, since partitioning erases the disk.The command file> @[phylum]<LispCore>Fugue>InstallLisp.othellowill install [phylum]<LispCore>Fugue>Lisp.SYSOUT onto the Lisp volume. Lisp will now appear when the mechine is (zero) booted or powered on.  To boot Mesa/Star which was previously installed for booting, do a "One Boot" as described above. From inside Lisp, the "LOGOUT" function will automatically cause a "One Boot", so that it is possible to switch back and forth between Mesa and Lisp without touching the boot button.To remove Lisp from your disk use Othello to reinstall a normal [iris|rain]<mesa>10.0>basics>SAx000Initial.db and reinstall diagnostics from[iris|rain]<mesa>10.0>basics>Moonboot.db.  The command > @[Phylum]<LispCore>Fugue>InstallDemo.othello is identical to InstallLisp.othello, except that it fetches DEMO.SYSOUT instead of LISP.SYSOUT. To fetch other SYSOUT files of your own making or from file servers other than Phylum, you can edit the .othello command file using your favorite text editor as appropriate. (Please note that only SYSOUTs made from the most recent versions on [phylum]<LispCore>Fugue> can be installed on a Dandelion. Chorus or older Fugue versions WILL NOT WORK.) Note: Othello network communication is based on PUPFTP.  Presently the 3Mb to 10Mb Gateways will forward PUPs only to explicitly registered Dandelions.  A network adminstrator can Dandelions in the gateway tables.  (Webster network center or PARC can provide clarification if necessary).  The disk utility Othello cannot reach an IFS file server without PUP forwarding by the gateway.  Initial microcode is the first phase of booting and overlays itself with either diagnostic microcode in a "zero boot" or with Mesa microcode in an "Alt-Boot-1".  We substitute the Lisp memory image for diagnostic microcode and, thereby, have a choice of Lisp or Mesa by zero or one booting. Lisp10SAx000Initial is slightly modified Initial microcode for the SA1000 or SA4000 or Q2040 hard disk that can read boot files larger than 128KB). For users who wish to remain compatible with Mesa 8.0 (Trinity), a Lisp8SAx000Initial.db is available on [phylum]<LispCore>Fugue>.-------------------------------------------------------------------------Starting Interlisp-D from Floppy DisksInterlisp-D can be saved on floppy disks a way that it can be installed directly from floppies, via the Services Installation Utility (Prometheus). The DEMO system will fit easily on three double-density double-sided floppies. Documentation for making a set of floppies from a SYSOUT file is covered in the file Phylum]<LispCore>Fugue>MakeLispFloppies.DOC. We will make available upon request sets of floppies for our standard releases.