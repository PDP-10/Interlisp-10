<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>[eris]&lt;LispCore>Intermezzo>dlion>BBLoops.mc!1</title>
  </head>
  <body>
    <div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 8pt sans-serif">{<br>File name bbLoops.mc<br>Description: BitBlt op-code<br>Author: don charnley<br>Created: January, 1980<br>Last edited by Fasnacht: June 18, 1981  8:47 AM: Delete L1Tldaw at<br>Last edited: October 8, 1980  6:35 PM<br>}</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span style="font: 8pt sans-serif"><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4IClick1 -- ReadSource1}<br>L4I1lsar:<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhSrcA,SrcA + 0], sfDisp, BRANCH[L4I1noop1,L4I2noop1X]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br>L4I1noop1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; Dst xor ~Dst, scDisp, sfDISP[L4I1rs]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L4I1rs:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; MD, scDisp, sc2DISP[L4I1sc2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[sf.true,sfM,L4I1rs];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; ~MD, scDisp, sc2DISP[L4I1sc2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[sf.comp,sfM,L4I1rs];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4IClick2 -- ShiftSource1}<br>L4I1sc2:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot0, scDisp, sc1DISP[L4I1sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[3,10,L4I1sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot4, scDisp, sc1DISP[L4I1sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[7,10,L4I1sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot8, scDisp, sc1DISP[L4I1sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[0B,10,L4I1sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot12, scDisp, sc1DISP[L4I1sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[0F,10,L4I1sc2];<br><br>L4I1sc1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; RRot1 Src, dirDisp, sc3DISP[L4I1sc3b]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[0E,10,L4I1sc1];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src, dirDisp, sc3DISP[L4I1sc3b]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[0F,10,L4I1sc1];<br><br>L4I1sc3b:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; RRot1 (Src or Q), dirDISP[L4I2lsar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0D,10,L4I1sc3b];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; LRot1 (Src or Q), dirDISP[L4I2lsar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0F,10,L4I1sc3b];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4IClick3 -- ReadSource2}<br>L4I2lsar:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">SrcA &larr; MAR &larr; [rhSrcA,SrcA + 1], sfDisp, GOTO[L4I2noop1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[dir.forward,dirM,L4I2lsar];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">SrcA &larr; MAR &larr; [rhSrcA,SrcA - 1], sfDisp, GOTO[L4I2noop1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[dir.backwards,dirM,L4I2lsar];<br>L4I2noop1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">scDisp, sfDISP[L4I2rs]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L4I2noop1X:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; Dst xor ~Dst, scDisp, sfDISP[L4I2rs]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L4I2rs:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; MD, scDisp, sc2DISP[L4I2sc2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[sf.true,sfM,L4I2rs];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; ~MD, scDisp, sc2DISP[L4I2sc2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[sf.comp,sfM,L4I2rs];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4IClick4 -- ShiftSource2}<br>L4I2sc2:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot0, scDisp, sc1DISP[L4I2sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[3,10,L4I2sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot4, scDisp, sc1DISP[L4I2sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[7,10,L4I2sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot8, scDisp, sc1DISP[L4I2sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[0B,10,L4I2sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot12, scDisp, sc1DISP[L4I2sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[0F,10,L4I2sc2];<br><br>L4I2sc1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; RRot1 Src, sc3DISP[L4I2sc3a]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[0E,10,L4I2sc1];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src, sc3DISP[L4I2sc3a]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[0F,10,L4I2sc1];<br><br>L4I2sc3a:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; RRot1 (~Src and Q), GOTO[L4I3ldar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0D,10,L4I2sc3a];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; LRot1 (~Src and Q), GOTO[L4I3ldar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0F,10,L4I2sc3a];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4IClick5 -- ReadDest}<br>L4I3ldar:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 0]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br>L4I3com:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; Hold xor Dst</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L4I3rd:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; MD</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4IClick6 -- Mask}<br>L4I4m1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Lcount &larr; Lcount - 1, NegBr</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br>L4I4m2:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">dfDisp, BRANCH[L4I4m3,L4Tshort]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L4I4m3:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Mask1 &larr; ~Mask1, dfDISP[L4I5m1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4IClick7 -- Mask}<br>L4I5m1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; Hold and ~Mask1, GOTO[L4I5m2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[df.null,dfM,L4I5m1];<br>L4I5m2:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; Dst and Mask1, dirDisp, GOTO[L4I5m3]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L4I5m3:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; Hold or Dst, scDisp, dirDISP[L4lsar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; Hold or Mask1, GOTO[L4I5m2A]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[df.and,dfM,L4I5m1];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; Hold and ~Mask1, GOTO[L4I5m2A]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[df.or,dfM,L4I5m1];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; Hold and ~Mask1, GOTO[L4I5m2A]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[df.xor,dfM,L4I5m1];<br>L4I5m2A:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">dirDisp</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">scDisp, dirDISP[L4lsar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{  L4 INNER LOOP }<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4Click1 -- ReadSource}<br>L4lsar:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">SrcA &larr; MAR &larr; [rhSrcA,SrcA + 1], sfDisp, sc3DISP[L4sc3b]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[dir.forward,dirM,L4lsar];<br>L4lsarA:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">SrcA &larr; MAR &larr; [rhSrcA,SrcA - 1], sfDisp, sc3DISP[L4sc3b]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[dir.backwards,dirM,L4lsar];<br><br>L4sc3b:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Save &larr; RRot1 (Src or Q), sfDISP[L4rs]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[0D,10,L4sc3b];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Save &larr; LRot1 (Src or Q), sfDISP[L4rs]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[0F,10,L4sc3b];<br><br>L4rs:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; MD, dfDisp, GOTO[L4ldaw]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[sf.true,sfM,L4rs];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; ~MD, dfDisp, GOTO[L4ldaw]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[sf.comp,sfM,L4rs];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4Click2 -- StoreDest}<br>L4ldaw:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhDstA,DstA + 0], scDisp, dfDISP[L4dw]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br><br>L4dw:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Hold , scDisp, sc1DISP[L4sc1], </span><span style="font: italic 8pt sans-serif">Write OK</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[df.null,dfM,L4dw];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Hold and Dst, scDisp, sc1DISP[L4sc1], </span><span style="font: italic 8pt sans-serif">Write OK</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[df.and,dfM,L4dw];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Hold or Dst, scDisp, sc1DISP[L4sc1], </span><span style="font: italic 8pt sans-serif">Write OK</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[df.or,dfM,L4dw];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Hold xor Dst, scDisp, sc1DISP[L4sc1], </span><span style="font: italic 8pt sans-serif">Write OK</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[df.xor,dfM,L4dw];<br><br>L4sc1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; RRot1 (Src), sc2DISP[L4sc2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0E,10,L4sc1];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; (Src), sc2DISP[L4sc2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0F,10,L4sc1];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4Click3 -- ShiftSource}<br>L4sc2:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot0, scDisp, GOTO[L4Lcnt]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[3,10,L4sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot4, scDisp, GOTO[L4Lcnt]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[7,10,L4sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot8, scDisp, GOTO[L4Lcnt]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[0B,10,L4sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot12, scDisp, GOTO[L4Lcnt]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[0F,10,L4sc2];<br><br>L4Lcnt:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Lcount &larr; Lcount - 1, dirDisp, NegBr, sc3DISP[L4sc3a]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br>L4sc3a:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; RRot1 (~Src and Q), dirDISP[L4ldar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0D,10,L4sc3a];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; LRot1 (~Src and Q), dirDISP[L4ldar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0F,10,L4sc3a];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4Click4 -- ReadDest}<br>L4ldar:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 1], GOTO[L4com]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[dir.forward,dirM,L4ldar];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA - 1], GOTO[L4com]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[dir.backwards,dirM,L4ldar];<br>L4com:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; Hold xor Save, dirDisp, BRANCH[L4rd,L4rdA,1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L4rd:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; MD, scDisp, dirDISP[L4lsar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4Tshort }<br>L4Tshort:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Hold, CANCELBR[$,Sub[dfM,1] ]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Mask2 &larr; Umask2, dfDisp</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Mask2 &larr; Mask2 and Mask1, dfDISP[L12Tdf]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4TClick1 -- ReadDest}<br>L4TermF:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 1], GOTO[L4Tcom]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[Or[dir.forward,LCeq0],dirM,L4ldar];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA - 1], GOTO[L4Tcom]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[Or[dir.backwards,LCeq0],dirM,L4ldar];<br>L4Tcom:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Hold &larr; Hold xor Save, DISP2[L4Trd]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L4Trd:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; MD, GOTO[L4Tm1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[NoPgCr,4,L4Trd];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L4TClick2 -- Mask}<br>L4Tm1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Hold, dfDisp</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Mask2 &larr; Umask2, dfDISP[L12Tdf]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{initialization for loops L1 and L2D}<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1/2 Init Click1 -- ReadSource}<br>L1I1lsar:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhSrcA,SrcA + 0], sfDisp</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[gr.gray,grM,chooseLoop];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">scDisp, sfDISP[L1sf]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; MD, scDisp, sc2DISP[L1I1sc2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[sf.true,sfM,L1sf];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; ~MD, scDisp, sc2DISP[L1I1sc2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[sf.comp,sfM,L1sf];<br><br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1/2 Init Click2 -- CycleSource}<br>L1I1sc2:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot0, scDisp, sc1DISP[L1I1sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[3,10,L1I1sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot4, scDisp, sc1DISP[L1I1sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[7,10,L1I1sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot8, scDisp, sc1DISP[L1I1sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[0B,10,L1I1sc2];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src LRot12, scDisp, sc1DISP[L1I1sc1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[0F,10,L1I1sc2];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; RRot1 Src, sc3DISP[L1I1sc3b]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[0E,10,L1I1sc1];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src, sc3DISP[L1I1sc3b]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[0F,10,L1I1sc1];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; RRot1 Src, GOTO[L1I3ldar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0D,10,L1I1sc3b];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; LRot1 Src, GOTO[L1I3ldar]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[0F,10,L1I1sc3b];<br><br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1/2 Init Click3 -- ReadDest}<br>L1I3ldar:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhDstA,DstA + 0]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Lcount &larr; Lcount - 1, NegBr</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; MD, BRANCH[L1I4mask1,SingleDstWExit]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1/2 Init Click4 -- Mask}<br>L1I4mask1:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Noop</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">dfDisp</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">dfDISP[L12df]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1 Init Click5 -- Mask}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{df.null  -- will go to loop L1}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Q &larr; Src</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[df.null,dfM,L12df];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Q &larr; Q and Mask1</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; Dst and ~Mask1</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1 Init Click6 -- store first end chunk}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhDstA,DstA + 0]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Dst or Q, GOTO[L1Entry]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L2 Init Click5 -- Mask}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{df.not null  -- will go to loop L2}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Q &larr; Src and Dst, GOTO[L2dfnext]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[df.and,dfM,L12df];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Q &larr; Src or Dst, GOTO[L2dfnext]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[df.or,dfM,L12df];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Q &larr; Src xor Dst, GOTO[L2dfnext]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[df.xor,dfM,L12df];<br><br>L2dfnext:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Q &larr; Q and Mask1</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; Dst and ~Mask1</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L2 Init Click6 -- store first end chunk}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhDstA,DstA + 0]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Dst or Q, GOTO[L2Entry]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{  L1 INNER LOOP }<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1Click1 -- StoreDest}<br>L1Loop:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 1], BRANCH[$,L1Exit]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br>L1pcrGo:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Src, BRANCH[L1Entry,L1pcr,1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L1Entry:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Lcount &larr; Lcount - 1, NegBr, GOTO[L1Loop]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br><br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{  L2 INNER LOOP }<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L2DClick1 -- StoreDest}<br>L2Loop:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhDstA,DstA + 0], dfDISP[L2Ddw]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Src and Dst, GOTO[L2Entry]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[df.and,dfM,L2Ddw];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Src or Dst, GOTO[L2Entry]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[df.or,dfM,L2Ddw];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Src xor Dst, GOTO[L2Entry]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2, at[df.xor,dfM,L2Ddw];<br><br>L2Entry:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Noop, GOTO[L2LCk2]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L2DClick2 -- ReadDest}<br>L2LCk2:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; DstA &larr; [rhDstA,DstA + 1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Lcount &larr; Lcount - 1, NegBr, BRANCH[$,L2pcr,1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br>L2pcrGo:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; MD, dfDisp, BRANCH[L2Loop,L2Exit]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1/2  Termination }<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1 Exit Click1 -- ReadDest}<br><br>L1Exit:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Noop, BRANCH[$,L1Tpcr,1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; MD, GOTO[L12Tmask]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1/2 Single dest word exit}<br>SingleDstWExit:<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Mask2{Mask1andMask2} &larr; Mask1 and Mask2, dfDisp</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Noop, dfDISP[L12Tdf]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L2 Exit Click1 -- ReadDest}<br>L2Exit:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">dfDisp, CANCELBR[$,0F]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">dfDISP[L12Tdf]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src, GOTO[L12Tmask]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[df.null,dfM,L12Tdf];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src and Dst, GOTO[L12Tmask]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[df.and,dfM,L12Tdf];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src or Dst, GOTO[L12Tmask]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[df.or,dfM,L12Tdf];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src xor Dst, GOTO[L12Tmask]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[df.xor,dfM,L12Tdf];<br><br>L12Tmask:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src &larr; Src and Mask2</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst &larr; Dst and ~Mask2</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Noop</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{L1TClick3 --StoreDest}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhDstA,DstA + 0]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1;<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MDR &larr; Src or Dst, GOTO[ItemRefill3]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br>{</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Src  PageCross</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">}<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; SRaRet, CANCELBR{CALL}[SrcLRemap,0F] {PageCross}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[Or[sf.true,PgCr],sfM,L4I2rs];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; SRaRet, CANCELBR{CALL}[SrcLRemap,0F] {PageCross}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[Or[sf.comp,PgCr],sfM,L4I2rs];<br><br>{rtn here}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">SrcA &larr; MAR &larr; [rhSrcA,SrcA + 0], sfDisp, GOTO[L4I2noop1]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[SRaRet,10,SrcRemapReturn];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; SRcRet, CALL[SrcLRemap] {PageCross}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[Or[sf.true,PgCr],sfM,L4rs];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; SRcRet, CALL[SrcLRemap] {PageCross}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[Or[sf.comp,PgCr],sfM,L4rs];<br><br>{rtn here}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">MAR &larr; [rhSrcA,SrcA + 0], sfDisp</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[SRcRet,10,SrcRemapReturn];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">sfDISP[L4rs]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br>{</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Dst  PageCross</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">}<br><br>{L4TrdA:}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{Page Cross}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; DRaRet, CALL[DstLRemap]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3, at[PgCr,4,L4Trd];<br><br>{rtn here}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 0]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[DRaRet,10,DstRemapReturn];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Noop, GOTO[L4Trd]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br>L4rdA:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{Page Cross}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; DRbRet, CANCELBR[DstLRemap,Sub[dirM,1] ]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br>{rtn here}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 0]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[DRbRet,10,DstRemapReturn];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">dirDisp, GOTO[L4rd]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br>L1pcr:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{Page Cross}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; ret.L1pcr, CALL[DstLRemap] {PageCross}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br>{rtn here}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 0], GOTO[L1pcrGo]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[ret.L1pcr,10,DstRemapReturn];<br><br>L2pcr:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{Page Cross}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; ret.L2pcr, {CALL}CANCELBR[DstLRemap]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br>{rtn here}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 0]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[ret.L2pcr,10,DstRemapReturn];<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">Lcount &larr; Lcount, NegBr, GOTO[L2pcrGo]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c2;<br><br>L1Tpcr:</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{Page Cross}<br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">rhRet &larr; ret.L1Tpcr, CALL[DstLRemap]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c3;<br><br>{rtn here}</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">DstA &larr; MAR &larr; [rhDstA,DstA + 0], GOTO[L1Exit]</span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">,c1, at[ret.L1Tpcr,10,DstRemapReturn];<br><br></span><span class="tab" val="66"></span><span style="font: 8pt sans-serif">{END}</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
</div>
<script>function do_tabs() { // unit = px
  var tabs = document.getElementsByClassName("tab");
  for (var i = 0; i < tabs.length; ++i) {
    var span = tabs[i];
    var val = span.getAttribute("val");
    if (val == null) console.log("Couldn't get val");
    var rect = span.getBoundingClientRect();
    var tabstop;
    if (val > 0) tabstop = Math.ceil(rect.left / val) * val;
    else tabstop = -val;
    console.log("do_tabs", val, tabstop)
    if (tabstop > 0) {
      var width = tabstop - rect.left;
      span.style.display = "inline-block";
      span.style.width = width + "px";
    }
  }
}
do_tabs();
</script>
  </body>
</html>
