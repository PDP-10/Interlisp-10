<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [eris]&lt;LispCore>Intermezzo>dlion>MLisp4K.mc!1</title>
  </head>
  <body>
    <pre>
{mlisp4k.mccreated by cal:   5-Nov-84 15:59:05 }{*****************************************************************************	BITBLT*****************************************************************************}{@BBLT:	opcode[166'b],	Bank &larr; 0,	c1;	,	c2;	CROSS[BBEntry],	c3;}BBThru:	TOSH &larr; smallpl, GOTO[IB.pc1]	,c1;{*****************************************************************************	MISC	Input*****************************************************************************}@MISC1:	opcode[170'b],	L2 &larr; L2.0, GOTO[Misc],	c1;@MISC2:	opcode[171'b],	L2 &larr; L2.0,	c1;Misc:	PC &larr; PC + 1, Xbus &larr; ib, XDisp,	c2;	uTOS &larr; TOS, YDisp, DISP4[MiscDisp, 0C],	c3;Misc0:	Q &larr; 121'd, CANCELBR[sink2, 0F],	c1, at[0C,10, MiscDisp];{MP9121}Misc3:	Q &larr; 121'd, CANCELBR[sink2, 0F],	c1, at[0F,10, MiscDisp];{MP9121}{*****************************************************************************	INPUT	Input*****************************************************************************}INPUT:	DISP4[MiscIn],	c1, at[0D,10, MiscDisp];	TOS &larr; EIData, IBDisp, L2 &larr; L2.0, GOTO[MiscInEnd],	c2, at[0,10,MiscIn];	TOS &larr; EStatus, IBDisp, L2 &larr; L2.0, GOTO[MiscInEnd],	c2, at[1,10,MiscIn];	TOS &larr; KIData, IBDisp, L2 &larr; L2.0, GOTO[MiscInEnd],	c2, at[2,10,MiscIn];	TOS &larr; KStatus, IBDisp, L2 &larr; L2.0, GOTO[MiscInEnd],	c2, at[3,10,MiscIn];	TOS &larr; uSTATE, IBDisp, L2 &larr; L2.0, GOTO[MiscInEnd],	c2, at[4,10,MiscIn];	TOS &larr; MStatus, IBDisp, L2 &larr; L2.0, GOTO[MiscInEnd],	c2, at[5,10,MiscIn];	TOS &larr; KTest, IBDisp, L2 &larr; L2.0, GOTO[MiscInEnd],	c2, at[6,10,MiscIn];	Q &larr; 122'd, GOTO[sink3],	c2, at[7,10,MiscIn];	TOS &larr; VersionHi, GOTO[MiscVers],	c2, at[8,10,MiscIn];	Q &larr; 122'd, GOTO[sink3],	c2, at[09,10,MiscIn];{MP9122}	Q &larr; 122'd, GOTO[sink3],	c2, at[0A,10,MiscIn];{MP9122}	Q &larr; 122'd, GOTO[sink3],	c2, at[0B,10,MiscIn];{MP9122}	Q &larr; 122'd, GOTO[sink3],	c2, at[0C,10,MiscIn];{MP9122}	Q &larr; 122'd, GOTO[sink3],	c2, at[0D,10,MiscIn];{MP9122}	Q &larr; 122'd, GOTO[sink3],	c2, at[0E,10,MiscIn];{MP9122}	Q &larr; 122'd, GOTO[sink3],	c2, at[0F,10,MiscIn];{MP9122}MiscInEnd:	TOSH &larr; smallpl, L2 &larr; L2.0, DISPNI[OpTable],	c3;MiscVers:	TOS &larr; TOS LRot8,	c3;	TOS &larr; TOS or VersionLo,	c1;	IBDisp, L2 &larr; L2.0, GOTO[MiscInEnd],	c2;{*****************************************************************************	OUTPUT	Output*****************************************************************************}OUTPUT:	MAR &larr; S &larr; [rhS, S + 0], Xbus &larr; uTOS, XDisp, CANCELBR[$, 0F],	c1, at[0E,10, MiscDisp];	S &larr; S - 2, DISP4[MiscOut],	c2;	IOPOData &larr; MD, GOTO[OutEnd],	c3, at[0,10,MiscOut];	IOPCtl &larr; MD, GOTO[OutEnd],	c3, at[1,10,MiscOut];	KOData &larr; MD, GOTO[OutEnd],	c3, at[2,10,MiscOut];	KCtl &larr; MD, GOTO[OutEnd],	c3, at[3,10,MiscOut];	EOData &larr; MD, GOTO[OutEnd],	c3, at[4,10,MiscOut];	EICtl &larr; MD, GOTO[OutEnd],	c3, at[5,10,MiscOut];	DCtl &larr; MD, GOTO[OutEnd],	c3, at[6,10,MiscOut];	TT &larr; MD, GOTO[OutSetBBTime],	c3, at[7,10,MiscOut];	TT &larr; MD, GOTO[OutSetOpt],	c3, at[8,10,MiscOut];	PCtl &larr; MD, GOTO[OutEnd],	c3, at[9,10,MiscOut];	TT &larr; MD, GOTO[OutMCtl],	c3, at[0A,10,MiscOut];	   Q &larr; 120'd, GOTO[sink1],		c3, at[0B,10,MiscOut];{MP9120}	EOCtl &larr; MD, GOTO[OutEnd],	c3, at[0C,10,MiscOut];	KCmd &larr; MD, GOTO[OutEnd],	c3, at[0D,10,MiscOut];	   Q &larr; 120'd, GOTO[sink1],	c3, at[0E,10,MiscOut];	POData &larr; MD, GOTO[OutEnd],	c3, at[0F,10,MiscOut];OutSetBBTime:	uBBTime &larr; TT, GOTO[IB.nop],	c1;OutEnd:	Noop, GOTO[IB.nop],	c1;OutSetOpt:	uLispOptions &larr; TT, GOTO[IB.nop],	c1;OutMCtl:	MCtl &larr; TT, GOTO[IB.nop],	c1;{*******************************************************************}logout:	TT &larr; 55{password to mesa}, CANCELBR[$]	c2;	rhRx &larr; Rx &larr; uIOPage,	c3;Off:	MAR &larr; [rhRx, IOPage.ProcessorCommand+0],	c1, at[LOGOUT];	MDR &larr;  4,	c2;	uLispBootMsg &larr; TT,  GOTO[Off],	c3;	{ E N D }</pre>
  </body>
</html>
