<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [eris]&lt;LispCore>busmaster>daybreak>ftBusExt.mc!2</title>
  </head>
  <body>
    <pre>
{File name &lt;tajo&gt;ftBusExt.mc	@ftBusExt.cm will produce ft fileDescription: Daybreak Interlisp Emulator Bus ExtensionAssumes only reg mBusStat and mBusIData will be read, to avoid tight memory timingPurcell 27-Jul-85 11:57:38 edited from dlBusExt.mc of 23-Jul-85  1:23:53 PDTPurcell  22-Jul-85 22:50:49 created from BusExt.mc of 17-Apr-85  1:34:04 PST}{INPUT:	TOSH &larr; smallpl, DISP4[MiscIn],	c1, at[0D,10, MiscDisp];}{(SETQ MBUS.OUTL (PLUS 0 (LLSH REG 4)))(SETQ MBUS.OUTM (PLUS 11 (LLSH REG 4)))(SETQ MBUS.INL (PLUS 9 (LLSH REG 4)))(SETQ MBUS.INM (PLUS 10 (LLSH REG 4)))(\DEVICE.OUTPUT DATA MBUS.OUTL)(\DEVICE.OUTPUT DATA MBUS.OUTM)(SETQ DATA (\DEVICE.INPUT MBUS.INL))(SETQ DATA (\DEVICE.INPUT MBUS.INM))}RegDef[uDummy,	UY,	0];	RegDef[uDat,	U,	0D];{uTOS}{~0D = mBusStat or mBusIData}OpTable: , c1, at[500];		BusX:	Noop,						c2{, at[09,10,MiscIn]};{read L}	TOS &larr; TOS LRot12, 				c3;	Ybus &larr; TOS, AltUaddr,				c1;	Float.L, {FloatResult}FloatA&larr; uDummy,		c2;pcInDn:	TOS &larr; FloatA&larr; FloatResult, 			c3;	{GOTO[IB.nop],}					c1;	Noop,						c2{, at[0A,10,MiscIn]};{read M}	TOS &larr; TOS LRot12, 				c3;	Ybus &larr; TOS, AltUaddr,				c1;	Float.M, {FloatResult}FloatA&larr; uDummy,{GOTO[pcInDn],} c2;	Noop,						c3{, at[0,10,MiscOut]};{Write L}	Rx &larr; S + 2,					c1;	Q &larr; rhS, 					c2;	rhRx &larr; Q LRot0, 				c3;				MAR &larr; Rx &larr; [rhRx, Rx + 0],			c1;	TOS &larr; TOS LRot12,				c2;	TT &larr; MD,					c3;		uDat &larr; TT,					c1;	Ybus &larr; TOS, {AltUaddr,} L2 &larr; L2.0, IBDisp,	c2;	Float.L, Xbus &larr; uDat, L2 &larr; L2.0, DISPNI[OpTable], c3;label:	Noop,						c3{, at[0B,10,MiscOut]};{Write M}	Rx &larr; S + 2,					c1;	Q &larr; rhS,					c2;	rhRx &larr; Q LRot0,					c3;		MAR &larr; Rx &larr; [rhRx, Rx + 0],			c1;	TOS &larr; TOS LRot12,				c2;	TT &larr; MD,					c3;		uDat &larr; TT,					c1;	Ybus &larr; TOS, {AltUaddr,} L2 &larr; L2.0, IBDisp,	c2;	Float.M, Xbus &larr; uDat, L2 &larr; L2.0, DISPNI[OpTable], c3;	{ E N D }</pre>
  </body>
</html>
