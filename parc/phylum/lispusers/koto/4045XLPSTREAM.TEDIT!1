XEROX	4045XLPStream2414045XLPStream14version 1.4By:  Will Snow (Snow.pasa@Xerox)DLRS232C or DLTTY or CENTRONICSINTRODUCTION4045XLPStream implements an image stream for the Xerox 4045 Laser CP, a 300 dot per inch laser printer.  The printer can emulate one of two printers, the Xerox 2700-II laser printer or the Xerox/Diablo 630; the software can produce output for either.  Output may be sent directly to the 4045 printer (using the DLRS232C, DLTTY or CENTRONICS driver packages), or to a file for printing later.   4045XLPStream.dcom should be loaded into a sysout which does not have 4045Stream.dcom already loaded, as the two packages are incompatible in the Koto Release.  Notes:  The settings on Bank D of the configuration cartridge have changed since version 1.2.  Please reset them to the new configuration before using version 1.4.If you plan to use TEdit, load it BEFORE loading 4045XLPStream, as 4045XLPStream redefines a TEdit function.630 emulation mode will only work with version 2.1 or higher of the 4045 proms.  The version of the proms in your 4045 can be found by looking at the first number of the Revision number found on the upper-left corner of the configuration sheet.  If you would like to get the latest version, contact your Xerox Sales Representative.When submitting any bug reports, evaluate the variable 4045XLPSTREAM.VERSION and record the value in the report.Caution:  DO NOT open multiple streams to the Communications ports.  It could cause a fatal crash of the port that is connected to the 4045 (ie. for every OPENIMAGESTREAM you do, perform a CLOSEF).  Changes since Version 1.2:Landscape printing is supportedAll drawing algorithms are implemented (ie. drawline, drawcircle,  drawcurve, etc.)630 emulation is now supportedInstallation of the software has been simplifiedPrinting parameters are easier to change, and there are more of themFixes:Source file printing is improved (including singlefileindex)  Using the 4045 as  a print server is better supportedCONFIGURATION OF THE 4045The 4045 printer can normally emulate one of two printers: either the Xerox 2700-II laser printer or the Xerox/Diablo 630.    Switch A-2 of the configuration cartridge determines the emulation mode (on = 630, off = 2700.) The Configuration Cartridge  The switches on the configuration cartridge should be set according to the port you are using.  The 4045 User Manual gives details about switch settings.  If the RS232 or TTY port is being used, the switches should be set as follows:Bank A:  switches 1,5,6 on				Bank C:  switches 1,4,5 onBank B:  switches 1,2,3,4,6 on				Bank D:  switch 4 onIf the Centronics port is being used,  set switch A-1 off.CablingThe cable between the 4045 and the communication port also depends on the port.  If you are using the Centronics or TTY port, you must build a special cable acording to the specifications in the User's  Guide for your workstation.  If you are using the RS232 port  from either the 1108 or 1186 workstations, the cable configuration is as follows:((SKETCH NIL SKETCHCONTEXT  ((ROUND 1 0)  (GACHA 10  (MEDIUM REGULAR REGULAR))  (CENTER BASELINE)  (LINE  30.0 12) NIL NIL  (CENTER CENTER)  (NIL NIL) T NIL NIL  1.0))  ((.05  13.0 NIL)  (TEXT  (72.0 .  116.0)  ("7")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((68.5  112.5  7.0  13.0)) NIL))  ((0.0  66.0 NIL)  (WIRE  ((80.0 .  120.0)  (212.0 .  120.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (64.0  112.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  140.0)  ("20")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((65.0  136.5  14.0  13.0)) NIL))  ((0.0  66.0 NIL)  (WIRE  ((212.0 .  168.0)  (80.0 .  144.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (64.0  136.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  164.0)  ("6")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((68.5  160.5  7.0  13.0)) NIL))  ((0.0  66.0 NIL)  (WIRE  ((80.0 .  168.0)  (212.0 .  144.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (64.0  160.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  188.0)  ("8")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((68.5  184.5  7.0  13.0)) NIL))  ((0.0  58.0 NIL)  (WIRE  ((80.0 .  192.0)  (196.0 .  228.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (64.0  184.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  212.0)  ("5")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((68.5  208.5  7.0  13.0)) NIL))  ((.016  8.0 NIL)  (BOX  (64.0  208.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  236.0)  ("4")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((68.5  232.5  7.0  13.0)) NIL))  ((0.0  12.0 NIL)  (WIRE  ((80.0 .  240.0)  (96.0 .  240.0)  (96.0 .  216.0)  (80.0 .  216.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (64.0  232.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  260.0)  ("3")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((68.5  256.5  7.0  13.0)) NIL))  ((0.0  66.0 NIL)  (WIRE  ((212.0 .  288.0)  (80.0 .  264.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (64.0  256.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  284.0)  ("2")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((68.5  280.5  7.0  13.0)) NIL))  ((0.0  66.0 NIL)  (WIRE  ((80.0 .  288.0)  (212.0 .  264.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (64.0  280.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  308.0)  ("1")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((68.5  304.5  7.0  13.0)) NIL))  ((0.0  66.0 NIL)  (WIRE  ((80.0 .  312.0)  (212.0 .  312.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (64.0  304.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (72.0 .  332.0)  ("Workstation")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((33.5  328.5  77.0  13.0)) NIL))  ((0.0  58.0 NIL)  (WIRE  ((96.0 .  228.0)  (212.0 .  192.0))  (ROUND 1 0) NIL NIL  1.0))  ((.05  13.0 NIL)  (TEXT  (220.0 .  116.0)  ("7")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((216.5  112.5  7.0  13.0)) NIL))  ((.016  8.0 NIL)  (BOX  (212.0  112.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (220.0 .  140.0)  ("20")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((213.0  136.5  14.0  13.0)) NIL))  ((.016  8.0 NIL)  (BOX  (212.0  136.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (220.0 .  164.0)  ("6")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((216.5  160.5  7.0  13.0)) NIL))  ((.016  8.0 NIL)  (BOX  (212.0  160.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (220.0 .  188.0)  ("8")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((216.5  184.5  7.0  13.0)) NIL))  ((.016  8.0 NIL)  (BOX  (212.0  184.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (220.0 .  212.0)  ("5")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((216.5  208.5  7.0  13.0)) NIL))  ((.016  8.0 NIL)  (BOX  (212.0  208.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (220.0 .  236.0)  ("4")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((216.5  232.5  7.0  13.0)) NIL))  ((0.0  12.0 NIL)  (WIRE  ((212.0 .  240.0)  (196.0 .  240.0)  (196.0 .  216.0)  (212.0 .  216.0))  (ROUND 1 0) NIL NIL  1.0))  ((.016  8.0 NIL)  (BOX  (212.0  232.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (220.0 .  260.0)  ("3")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((216.5  256.5  7.0  13.0)) NIL))  ((.016  8.0 NIL)  (BOX  (212.0  256.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (220.0 .  284.0)  ("2")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((216.5  280.5  7.0  13.0)) NIL))  ((.016  8.0 NIL)  (BOX  (212.0  280.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.016  8.0 NIL)  (BOX  (212.0  304.0  16.0  16.0)  (ROUND 1 0) NIL  1.0  (NIL NIL)))  ((.05  13.0 NIL)  (TEXT  (220.0 .  308.0)  ("1")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((216.5  304.5  7.0  13.0)) NIL))  ((.05  13.0 NIL)  (TEXT  (220.0 .  332.0)  ("4045")  1.0  (CENTER BASELINE)  (GACHA 10  (MEDIUM REGULAR REGULAR))  ((206.0  328.5  28.0  13.0)) NIL)))(38.125 111.25 195.0 230.0)1.254.0The RS232 port cable is a male-male 25 pin D shell and is available in two parts as #298-3 Null Modem Adapter, and #168-2 Data Cable from INMAC; 2465 Augustine Drive; Santa Ana, CA  98054  (714) 641-3100.The cable configuration for the Centronics port  is shown in the Xerox 1108 User's Guide.USING THE COMMUNICATIONS PORTS FOR PRINTINGThere are two communications ports that are used most often for printing purposes; the RS232C port and the TTY port (on the 1186, they are labeled COMM/DTE and Printer/DCE respectively, and on the 1108 they are labeled RS232C and Printer respectively.)   They both use the RS232C standards for data communications, but they differ in that the RS232C port is buffered and as such, is the preferred port for printing.  The 4045XLPStream software has been designed primarily for the RS232 port.  The Centronics parallel port is available only on the 1108 with the CPE upgrade.  Initializing the Communications Ports for PrintingUpon loading the software, a prompt will appear asking the user for the port they wish to use for printing.  The allowable responses are "R" for RS232, "T" for Tty, "C" for Centronics, and "D" for the default port. The software will then automatically load the correct communications package for the port selected. For more information on setting the default port, see the notes in the section titled "4045XLPSTREAM OPTIONS" of this document.  Notes:  	Make sure the communications package you wish to use is in the currently connected directory, or in one of the subdirectories specified in DIRECTORIES.  The RS232 port uses DLRS232C.DCOM,  theTty port uses DLTTY.DCOM, and the Centronics port uses CENTRONICS.DCOM.ˇˇ  1 1 0 8   U s e r s :     Y o u   m u s t   h a v e   t h e   E - 3 0   o p t i o n   k i t   i n s t a l l e d   t o   b e   a b l e   t o   u s e   t h e   R S 2 3 2   p o r t .   ( I f   y o u r   m aˇ chine has a port labeled "RS232C" then you have the E-30 kit installed.)	ˇˇ  1 1 8 6   U s e r s :     T h e   R S 2 3 2   p o r t   i s   l a b e l e d   D T E / C O M M   o n   t h e   C 4   b o a r d   o f   y o u r   w o r k s t a t i o nˇ , the TTY port is labeled DCE/Printer on the same board.The Centronics port is available only on 1108's with the CPE-FP upgrade (1109's.)  See the complete Centronics documentation in the Lisp Library Manual.Using the TTY port for printing large bitmaps or sketchs is slow due to the nature of the port.USING THE 4045 AS A DEFAULT PRINTING HOSTLoading 4045XLPStream will change your DEFAULTPRINTINGHOST and DEFAULTPRINTERTYPE to set the 4045 as the default printer.  This allows you to use the default hardcopy functions for printing.  To print  source or TEdit files to the 4045:ˇˇ  ( S E N D . F I L E . T O . P R I N T E R  ˇ Fˇˇ  i l e   H o s tˇ  Options)  Where File is a Source or Tedit file, Host is one of {RS232}, {TTY},  or {CENTRONICS}, and Options is an a-list of print options.  (Note:  the only supported options currently are #COPIES, DOCUMENT.NAME and BREAK.PAGE which prints a job description page between jobs.)  Some examples follow:ˇˇ  ( S E N D . F I L E . T O . P R Iˇ NTER 'MySourceorTEditFile) will send the file MySourceorTEditFile to the default printer (4045xlp after loading this package). (SEND.FILE.TO.PRINTER 'MySourceorTEditFile NIL '(BREAK.PAGE T)) will send the file MySourceorTEditFile to the printer and specifically print a job description page.(SEND.FILE.TO.PRINTER 'MySourceorTEditFile NIL '(#COPIES 2 DOCUMENT.NAME "Another Wonderfully Printed Document from the 4045")) will print 2 copies of the file on the printer attached to the default port with the name given.Note: '.4045XLP must be supplied if the 4045 is not the default printer, and the port must be specified if it is not the default port.To print windows to the 4045XLP:	ˇˇ Ôf 	 S e l e c t   " H A R D C O P Y "   f r o m   t h e   R i g h t - b u t t o n   m e n u   o f   t h e   s e l e c t e d   w i n d o w   ( N o t e :     i f   t h e   4 0 4 5 X L P   i s   n o t   t h e   d e f a u l t   p r i n t e r ,   s l i d e   o f f   t o   t h e   r i g h t   o f   t h e   H A R D C O P Y   a n d   s e l e c t   " T O   A   P R I N T E R , "   t h e n   c h o o s e   4 0 4 5 X L P .     Y o u   w i l l   o n l y   n e e d   t o   d o   t h i s   i f  ˇ DEFAULTPRINTINGHOST has been changed after loading this package.Creating 4045XLP Master Files	ˇˇ Ôfˇ 	4045XLP Master files are files similar to Interpress master files in that they can be printed without further formatting.   They can be from windows, bitmaps, and TEdit/Sketch files.  To create a 4045XLP master from a window (including Tedit and Sketch windows), select "Hardcopy" from the background menu, slide off to the right and select "To a file," and enter the name you wish for the master file with an extension of .4045XLP.  	ˇˇ Ôf 	ˇ To create a 4045XLP master file for a bitmap,  follow these steps:(SETQ FOO (OPENIMAGESTREAM 'MYMASTERFILE.4045XLP))(BITBLT MYBITMAP 0 0 FOO 0 0)(CLOSEF FOO)The file MYMASTERFILE.4045XLP can be printed at any time.  	ˇˇ Ôf 	 P r i n t i n g   a   m a s t e r   f i l e   i s   e a s y .    ˇ Evaluateˇˇ    (ˇ SEND.FILE.TO.PRINTERˇˇ    'ˇ MYMASTERFILE.4045XLP '4045XLPˇˇ  )   a n d   p r e s t o !   i t   i s   p r i n t e d   ( b u t   w i t h o u t   t h e   d e l a y  ˇ forˇˇ    f o r m a t t i n g ! )ˇ Printing using FTPServerThe Lisp Library Package FTPSERVER will allow 2 11xx machines to share files via the Ethernet (see complete FTPSERVER documentation in the Lisp Library Packages Manual.)  The 4045XLPStream software has been designed to use FTPServer for printing from remote machines on a local 4045 printer.In this short example, SERVER  is the workstation physically connected to the 4045 and has a Pup Host Number of 0#20#;  HOST is connected to SERVER by Ethernet .  Both HOST and SERVER must have 4045XLPStream.dcom loaded.Note: to get the Pup Host Number of SERVER, evaluate (PORTSTRING (ETHERHOSTNUMBER)) on SERVER.  If the number has not been set yet, the system will prompt you to enter one (1-255).  Enter an octal number (1-255) that is free on your network.  If you are not sure about the free numbers on your network, contact your system administrator. Load FTPServer.dcom onto the SERVER machine.  Evaluate (FTPSERVER) on SERVER to start the FTP watcher process.You may use this machine from HOST as the default printing port, or by copying files to it.  For example:To make SERVER be the default printer for HOST,  evaluate (4045XLP.SET.PARAMETERS '((PORT . {0#20#}LPT:.4045XLP))).  Now, any Hardcopy's will automatically get sent and then printed on SERVER without any user intervention.You can also manually copy masterfiles to the other SERVER machine as such:(COPYFILE 'FOO.4045XLP '{0#20#}LPT:.4045XLP)will copy the 4045XLP master file  to the SERVER machine and automatically print it without any user intervention on the SERVER machine.Alternatively, when you select "Hardcopy - To a file," you can enter {0#20#}LPT:.4045XLP, and the file will print immediately after formatting.Special Features of Default Printing to the 4045XLP	ˇˇ Ôf 	ˇ Any window may be printed using the HARDCOPY menu item, including TEdit and Sketch windows.	ˇˇ Ôf 	 J o b  ˇ qˇˇ  u e u e i n g   i s   i m p l e m e n t e d ,   a l l o w i n g   t h e   u s e r   t o   d o   m a n y   h a r d c o p y s   o f   w i n d o w s   a n d  ˇ SEND.FILE.TO.PRINTERˇˇ  s   w i t h o u t   w o r r y   o f   m i x i n g   t h i n g s   u p   ( e s p e c i a l l y   i f  ˇ the stream parameter PRINTHEADER is T).4045XLPSTREAM OPTIONSThere are several options of 4045XLPStream that may be set by the user.  Most users will not need to change from the default values.  The variable options are stored in the variable 4045XLP.DEFAULTS, which is an instance of the 4045XLP.PARAMETERS record.  The following functions will modify 4045XLP.DEFAULTS, and thus the option settings directly.  ˇˇ Ôf 	ˇ (4045XLP.SET.PARAMETERS PARAMETERS)  Will set any valid parameter for the 4045.  PARAMETERS should be an A-list  of the form ((Parameter . value)(Parameter . value) ...)	For example, to set the default printing port and the default mode, while leaving all other values as they were,  you would evaluate:  	(4045XLP.SET.PARAMETERS (LIST (CONS PORT '{TTY}) (CONS LANGUAGE 630)))ˇˇ Ôf 	ˇ (4045XLP.GET.PARAMETERS PARAMETERS)  Will return the value of any of the parameters listed.PARAMETERS should be a list of the values you wish to check.  If PARAMETERS is NIL, it will return the current settings of all the options.For example, (4045XLP.GET.PARAMETERS '(SLUG LANGUAGE PORT))will return a list similar to this (depending on the current settings):((SLUG NIL) (LANGUAGE 2700) (PORT {RS232}))An alternate way of showing and changing the parameters for the stream is to call (INSPECT 4045XLP.DEFAULTS '4045XLP.PARAMETERS).  This will produce an inspector window with the parameter name on the left and its value on the right.   To set a parameter, select the parameter by left buttoning on it in the inspector window, then middle button and select SET.  A window will prompt you for the new value of the parameter selected.The following is a list of legal parameter names and values:ˇˇ Ôf 	 S L U G   -   E i t h e r  ˇ an integer 0-255,ˇˇ    o r   N I L ,ˇ  default is NIL. ˇˇ   ˇ Tˇˇ  h i s   c o n t r o l s   t h e   i m a g e   t o   b e   p r i n t e d   w h e n   t h e   s t r e a m   c o d e   s e e s   a   c h a r a c t e r   i t   c a n n o t   p r i n t .ˇ   NIL indicates print a slug(black box), a number indicates print that character.	ˇˇ Ôf 	 L A N G U A G E   -   M u s t   b e   e i t h e r   6 3 0   o r   2 7 0 0 ,   d e f a u l t   i s   2 7 0 0 .    ˇ This controls the default mode of the stream code.  ˇˇ  M u s t   b e   s e t   t o   t h e   s a m e   v a l u e   a s   t h e   p r i n t e rˇ .	ˇˇ Ôf 	 P O R T   -   M u s t   b e   a   v a l i d   p o r t   f o r   u s e   i n   p r i n t i n g ,   d e f a u l t   i s   { R S 2 3 2 } .     C o n t r o l s   t h e   d e f a u l t   p r i n t i n g   p o r t .     N o t e :   m a y   b e   s e t   t o   a   n e t w o r k   a d d r e s s   f o r   r e m o t e   p r i n t i n gˇ .  See Printing Using FTPServer (above) for more information. 	ˇˇ Ôf 	ˇ MESSAGESTREAM - a window, stream or NIL, default is the PromptWindow.  Controls where messages are sent during the printing process.  ˇˇ  I f   i t   i s  ˇ a window or a stream, messages about the status of the job during printing will be printed to the given there.  Otherwise the messages are suppressed.	ˇˇ Ôf 	 P R I N T E R R O R S   -   F l a g ,   T   o r   N I Lˇ , default is NILˇˇ  .       C o n t r o l s   t h e   c o l l e c t i o n   a n d   p r i n t i n g   o f   a n y   p r i n t i n g   e r r o r s   e n c o u n t e r e dˇ .  If it is T, a summary page listing any problems found will be printed at the end of a job.	ˇˇ Ôf 	ˇ PRINTHEADERˇˇ    -   i s   eˇ ither a string, T or NIL, default is NIL.  Controls the printing of a header page describing the job being printed.  T indicates print the page, NIL indicates not to print the page.  If it is a string, it indicates to use this string as the title of the header page.	ˇˇ Ôf 	ˇ WINDOWTITLEˇˇ    -   i s   e i t h e r   a   s t r i n g   o r   N I Lˇ , default is NILˇˇ  .     C o n t r o l s   t h e   d e f a u l t   t i t l e   f o r   w i n d o w s   t h a t   a r e   p r i n t e d   u s i n g   t h e  ˇ default ˇˇ  h a r dˇ copy method.  If it is a string,  the title used will be this string, otherwise "Window Image" will be used as the title.	ˇˇ Ôf 	 L A N D S C A P E   -   F l a g ,   T   o r   N I L ,   d e f a u l t   i s   N I L .     C o n t r o l s   t h e   d e f a u l t   p a p e r   o r i e n t a t i o n   o f   t h e   s t r e a m .     T   i n d i c a t e s   l a n d s c a p e   ( s i d e w a y s ) ,   N I L   i n d i c a t e s   p o r t r a i t   o r i e n t a t i o n .ˇ 	Notes:			If the variable 4045XLP.DEFAULTS is non-NIL before loading 4045XLPStream, the default values will NOT be initialized to the above settings.  Programmers note: you can set the default values for all these items by setting 4045XLP.DEFAULTS to an instance of the 4045XLP.PARAMETERS record before loading this package.  PROGRAMMATIC INTERFACE4045XLPStream software implements an imagestream interface to the 4045 laser printer.  The methods to access this stream are shown below.  For more information on using imagestreams, see the Grapics Output Operations chapter of the Interlisp-D Reference Manual.Opening a 4045 StreamThe 4045 can implement either 2700 protocols or 630 emulation modes.  To determine the mode used, the parameter LANGUAGE is set to either 630, or 2700 (default is 2700.)  The mode may also be set when opening the stream by using the MODE option.  Make sure switch A-2 on the configuration switch corresponds to the mode the software is using (off = 2700 mode, on = 630 mode.)   The 4045 can also produce portrait or landscape output.  To determine the orientation of the output, the parameter LANDSCAPE is set to T or NIL (default is NIL, or Portrait.) The orientation may also be changed when opening the stream by using the LANDSCAPE  or PORTRAIT options. TEdit Users:  see the special notes for TEDIT at the end of this document.  The page size of the 4045 is 2550 pixels wide by 3300 pixels long in portrait mode, and 3300 x 2550 in landscape mode.  4045 image streams are created by the OPENIMAGESTREAM  function.    Some examples:	ˇˇ Ôfˇ 	(SETQ 4045STREAM (OPENIMAGESTREAM '{CENTRONICS}.4045XLP)) creates a stream to the 4045 connected to the workstation's Centronics port.  	ˇˇ Ôfˇ 	(SETQ 4045STREAM (OPENIMAGESTREAM '{RS232}      '4045XLP ))   creates a stream to the 4045 connected to the workstation's RS232 port.  	ˇˇ Ôfˇ 	(SETQ 4045STREAM (OPENIMAGESTREAM '{RS232}.4045XLP )) creates a stream to the 4045 connected to the workstation's RS232 port.  Notice that the type need only be included as an extension to the port name.	ˇˇ Ôf 	 (ˇ SETQ 4045STREAM(OPENIMAGESTREAM NIL  NIL '(MODE 630))) creates a stream to the default printer (4045)  connected to the default port specifically in 630 mode. 	ˇˇ Ôf 	 (ˇ SETQ 4045STREAM(OPENIMAGESTREAM NIL  '4045XLP '(MODE 2700))) creates a stream to the 4045 connected to the workstation's default port specifically in 2700 mode. 	ˇˇ Ôf 	 ( S E T Q   4 0 4 5 S T R E A M   ( O P E N I M A G E S T R E A M   N I Lˇ   NIL '(LANDSCAPE T)))  creates a stream to the defaultprinter (4045) connected to the workstation's default port in LANDSCAPE orientation.	ˇˇ Ôf 	 ( S E T Q   4 0 4 5 S T R E A M   ( O P E N I M A G E S T R E A M   N I L   N I L   ' ( P O R T A I T   T   ) ) )   c r e a t e s   a   s t r e a m   t o   t h e   d e f a u l t   p r i n t e r   o n   t h e   d e f a u l t   p o r t   i n   p o r t r a i t   m o d e ,   a n d   t e l l s   t h e   s o f t w a r e   tˇ o print a the heading "My heading" on the top of every page.Using a 4045XLP StreamIn the above cases, we set the variable 4045STREAM to a 4045 image stream.  Once we have done that, the image stream can thereafter be used as the destination of any graphics operation.   Here are some examples of operations that may be performed on a 4045Xlp image stream:	ˇˇ Ôfˇ 	(BITBLT (WHICHW) NIL NIL 4045STREAM 0 0) will place a window's image at position (0,0) on the 4045's page.	ˇˇ Ôfˇ 	(DRAWLINE 500 500 3000 500 30 NIL  4045STREAM) will draw a line 30 spots (1/10 inch) wide from position (500,500) to position (3000,500).	ˇˇ Ôfˇ 	(DSPNEWPAGE 4045STREAM) will cause the current page to be printed and a new one to be started.  NOTE: this will not have any immediate effect unless you are forcing output immediatly to the port, which is unadvisable as it will not allow other tasks to complete until the current stream is closed.	ˇˇ Ôfˇ 	(PRINTOUT 4045STREAM "Hello world" T) will print the string "Hello world'' on the 4045's page, followed by a carriage-return/linefeed.	ˇˇ Ôf 	 ( C L O S E F   4 0 4 5 S T R E A M )     C l o s e s   t h e   oˇ pen 4045 image stream and sends the last page to the printer.  Make sure you close all open 4045 image streams!  If the output was to the defaultprinter and default port, evaluating this will cause the file to be printed.Resetting 4045XLPStreamOccasionally, the 4045XLPStream software may become wedged.  If this happens,  evaluate the function (4045XLP.RESET) which will reset the stream software.  Use this function only when you are positive that nothing else is printing or hardcopying as it may damage the state of the job.  LIMITATIONS	ˇˇ Ôfˇ 	The current version of 4045XLPStream does not use fonts other than TITAN 10.   Documents  will print in Titan 10 and Titan 10 Bold only.  Source files print in landscape mode, and regular printing in landscape mode is supported. This is a temporary limitation.	ˇˇ Ôf 	 S C A L E D B I T B L T   t o   t h e   4 0 4 5   s u p p o r t s   s c a l e   f a c t o r s   o f   1 ,   2 ,   a n d   4   o n l y .  ˇ INTERACTIONS WITH OTHER SOFTWARE PACKAGES	ˇˇ Ôf 	 I f   y o u   a r e   u s i n g   N o t e C a r d s ,   l o a d  ˇ NOTECARDS-4045XLPPATCH.DCOM ˇˇ  t o   f i x   a   p r o b l e m   i n   N o t e C a r d s . ˇ 	ˇˇ Ôf 	ˇ TEDIT ˇˇ  I f   y o u   a r e   g o i n g   t o   l o a d   T E d i t ,   l o a d   i t   B E F O R E   4 0 4 5ˇ XLPˇˇ  S t r e a m ,   a s   t h e r e   i s   o n e   T e d i t     f u n c t i o n   t h a t   i s   r e d e f i n e d   b y   4 0 4 5ˇ XLPˇˇ  S t r e a m .ˇ If you want to print a tedit document in landscape, you must first change the TEdit margins.  To do this, open a tedit window, GET the file, and bring up the Page Layout Menu.  Change the Margins fields to  LEFT: 4.5, RIGHT: -10.0, TOP: 19.0, BOTTOM: 3.2 and apply this to ALL the pages (First(&Default),  OtherLeft and OtherRight).  Next PUT the file (in this example the modified-for-landscape file will be called "landscapefile.tedit"), and then open an image stream to the printer in landscape mode by evaluating (SETQ MYSTREAM (OPENIMAGESTREAM NIL NIL '(LANDSCAPE T)) .  Now you can perform the actual hardcopy by evaluating (TEDIT.HARDCOPY (OPENTEXTSTREAM 'landscapefile.tedit)  MYSTREAM NIL NIL NIL '(LANDSCAPE T)).  After all this is done (there will be a message in the prompt window "Formatting for print... xx pgs done."), you must close the printer file before it will print, so evaluate (CLOSEF MYSTREAM).   	ˇˇ Ôf 	 I f   y o u   a r e   u s i n g   S i n g l e F i l e I n d e xˇ , when calling the SINGLEFILEINDEX function, just specify {lpt} as the destination file (instead of {lpt}.4045xlp.ˇˇ   ˇ ˇˇ  ˇ      (LIST ((PAGE NIL (FOLIOINFO (ARABIC) STARTINGPAGE# 1) (0 0 612 792) ((FOLIO NIL (PARALOOKS (QUAD CENTERED) CHARLOOKS (SUPERSCRIPT 0 SIZE 10 FAMILY MODERN OVERLINE OFF STRIKEOUT OFF UNDERLINE OFF SLOPE REGULAR WEIGHT MEDIUM) FORMATINFO (ARABIC)) (174 36 288 36) NIL) (HEADING NIL (HEADINGTYPE RUNNINGHEAD) (84 744 444 36) NIL) (TEXT NIL NIL (84 96 456 600) NIL))) (PAGE NIL NIL (0 0 612 792) ((FOLIO NIL (PARALOOKS (QUAD CENTERED) CHARLOOKS (SUPERSCRIPT 0 SIZE 10 FAMILY MODERN OVERLINE OFF STRIKEOUT OFF UNDERLINE OFF SLOPE REGULAR WEIGHT MEDIUM)) (282 42 72 36) NIL) (HEADING NIL (HEADINGTYPE RUNNINGHEAD) (84 744 444 36) NIL) (TEXT NIL NIL (84 96 456 600) NIL))) (PAGE NIL NIL (0 0 612 792) ((FOLIO NIL (PARALOOKS (QUAD CENTERED) CHARLOOKS (SUPERSCRIPT 0 SIZE 10 FAMILY MODERN OVERLINE OFF STRIKEOUT OFF UNDERLINE OFF SLOPE REGULAR WEIGHT MEDIUM)) (282 42 72 36) NIL) (HEADING NIL (HEADINGTYPE RUNNINGHEAD) (84 744 444 36) NIL) (TEXT NIL NIL (84 96 456 600) NIL)))))       )   H»                   T         (   H»                             ( H H»                              ( H H»                              )   H»                   T         ) $ $»                   T         )    »                   T         ( T T»                             ( H H»                             ( $ $»                             ( $ $»                              (    »                             ( $ H»                             ( $ $»                             (    » 
                            )   H»                       T     ( H H»                             (   $»                             (   H»                             ( ê ê 
                             )    »                       T     (    »                             )    @                         T     ( H H¯ 
                             ( ä ä8                             (    »                             ( ä ä8                              D    »        »       PAGEHEADING RUNNINGHEAD                      MODERN 
         MODERN           MODERN 
         GACHA 
         MODERN 
          MODERN 
      Ä  MODERN 
         MODERN 
          MODERN          MODERN           MODERN 
         LOGO                             
                  HRULE.GETFN  MODERN 
                          HRULE.GETFN  MODERN 
                          HRULE.GETFN  MODERN 
                            	           HRULE.GETFN  MODERN               	           HRULE.GETFN  MODERN               	                      !                                              ã             =              b             	             ú             m            L             7              %                          æ                                        T                          1             E                          ?             6                                       ﬂ                                 d              v                                                                                               ;                                [                 	        _  SKIO.GETFN.2  MODERN 
                        Õ             A                           +                   f              “             2                 
  Ω             
                         œ      K                    ©      ;             Ñ                           `             *             ¿                    +                 
   /                                               1              ¬          	   %      Ç          	   •          	   ·             á                                       Á      C                                             ∂                          E             3                                       <                    I      
                                 i                                                   $             ›            S             o             j             f              w             L             "              	             â             O              ?             3                                 ^                                 ü             i                                              I       :       ‹                          
              \       	                            	                                  â             G                                 
              9             
       7       
       A                          /             H             ,            Ø             =                                                                π      T                                b      6       [                                     @      	                                                y             ô                                "             ô      `                                                                       ;             ç      
             |                               @                                              è       Æ                                 ø                                                            í                                       å                          ã                          œ                    	      ¢                    	      §                    Q      é                   G      ?                                                          n                          ç                          c       …                                 ä                    I      ‡                                 d              ´                                                                 ë                   )                           I             A                                             i             Ö                               ö                    G      u                                                                                                                                                                kÄz∫