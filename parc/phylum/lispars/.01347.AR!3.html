<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [phylum]&lt;LispARs>01347.AR!3</title>
  </head>
  <body>
    <pre>
Number: 1347Date:  5-Jun-84 14':14':27Submitter: Sannella.PASource: Jeffrey Shulman &lt;SHULMAN@RUTGERS.ARPA&gt;Subject: INFILEP returns odd list on first call in sysout (bug in \IFS.LOOKUPFILE)Assigned To: vanMelleAttn: Status: ClosedIn/By: Problem Type: BugImpact: SeriousDifficulty: HardFrequency: EverytimePriority: HopefullySystem: CommunicationsSubsystem: PUP ProtocolsMachine: Disk: Lisp Version: Source Files: Microcode Version: Memory Size: File Server: Server Software Version: Disposition: [bvm fixed 6/7/84]'["Sannella" "16-Aug-84 10':34':06" Subject': Attn': Status':(Fixed-&gt;Closed)]Description: 'Return-Path': &lt;SHULMAN@RUTGERS.ARPA&gt;'Received': from RUTGERS.ARPA by Xerox.ARPA ; 29 MAY 84 09':35':48 PDT'Date': 28 May 84 18':07':56 EDT'From': Jeffrey Shulman &lt;SHULMAN@RUTGERS.ARPA&gt;'Subject': Bug in Fugue.6 GREET/MAKESYS (actually in \IFS.LOOKUPFILE)'To': lispsupport.pa'cc': SHULMAN@RUTGERS.ARPA'''	1) I will load some files into April 9th''s version of Fugue.6 and then'	   do a MAKESYS (from a Dolphin.)'	'	2) Upon subsequent startup of this new sysout I will be asked for the'	   system INIT file.  I will type {Rutgers}&lt;DOLPHIN&gt;INIT.RUTGERS (as'	   normal.)''	3) Rutgers will come back and ask me to log in as normal (if I am'	   on my Dlion, it of course skips this on the Dolphin) which I will '           do.''	4) Next thing that happens is lisp gives me an UNBOUND ATOM SHULMAN'	   then if I hit a RETURN it gives a BAD COMPILED FUNCTION $d.''I have traced this to GREETLST which is being given a dot pair of my'USERNAME and some string from GREETFILENAME.  Tracing GREETLST on a'"virgin" Fugue.6 sysout shows GREETLST being passed the site init file'at this point.''&lt;and hour passes&gt;''Ok, after digging I have traced the problem to under \IFS.LOOKUPFILE,'from under \LEAF.GETFILENAME(?) from under INFILEP.  It seems the'first time this is called it returns the dotted pair of the username'and some funny string.  Each subsequent call returns ?.  Setting'PUPTRACEFLG to T reveals it trying to send something on socked 2#2#61'and receiving an error 2, no processes at destination port.''Is this a problem in out DEC-20 leaf code (from Schoen''s SUMEX stuff) or'something else?  Have a fix?''								Jeff'-------''[bvm':  It''s actually a nasty error in the password code, involving an unintentional free variable interacting with a forced specvar in \IFS.LOOKUPFILE]'Workaround: Assuming he has no file servers that support LookupFile (only IFS''s do), the simplest thing for him to do is (PUTD ''\IFS.LOOKUPFILE ''(LAMBDA NIL ''?)).'Test Case: Edit-By: SannellaEdit-Date: 16-Aug-84 10':34':07</pre>
  </body>
</html>
