Number: 1501Date: 26-Jun-84 12':16':05Submitter: le.pasaSource:  Schoen@sumex-aimSubject: Break in ADDFILE when Reloading knowledge base fileAssigned To: Attn: Status: IncompleteIn/By: Problem Type: BugImpact: ModerateDifficulty: ModerateFrequency: IntermittentPriority: System: Programming EnvironmentSubsystem: File PackageMachine: Disk: Lisp Version: Fugue6Source Files: Microcode Version: Memory Size: File Server: Server Software Version: Disposition: 'To': Schoen@sumex-aim'from Masinter'[ I''ve tried a bunch of simple things that I could to make this happen in simpler circumstances but I couldn''t.  When you see it happen again, could you look down the stack more and find out who was calling ADDFILE and what the arguments were, etc? (I''m marking AR#1501 ''incomplete'' until I can get more details.]''Description: '  Eric Scheon reports the following problem':'"Here''s a nuisance bug which hits us every now and then (reproducible, but the circumstances which normally cause it are rare).  It has to do with reloading of Strobe knowledge bases, which are files in the standard  file package format.  Invariably, if I load a knowledge base (which eventually'calls LOAD on the KB file), delete it in memory (which takes no special action with regard to the file package), and then load it again, I get an error ATTEMPT TO RPLAC NIL under ADDFILE.  Further, the FILE property of the knowledge base file atom is set to (NIL), where it would ordinarily be ((FOOCOMS)) if I were loading the file FOO.KB.  If I don''t take corrective action, and later try to store that KB (which eventually calls MAKEFILE), the file package doesn''t find the COMS for the file, and writes out an essentially empty file.''The only peculiar thing I can think of (since this works find for standard Interlisp source files) is that the knowledge base files always have the extension .KB.  Perhaps there needs to be a call to (NAMEFIELD FILE) somewhere in the file package.'                 ''Workaround: Test Case: Edit-By: MasinterEdit-Date: 19-Jul-84 17':36':54