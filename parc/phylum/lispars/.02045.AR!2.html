<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [phylum]&lt;LispARs>02045.AR!2</title>
  </head>
  <body>
    <pre>
Number: 2045Date:  2-Sep-84 16':24':41Submitter: MasinterSource: JonLSubject: WHENCLOSE works for streams; WHEREIS, HASH fixed to allow WHENCLOSEFNS to get streamsAssigned To: MasinterAttn: ReleaseStatus: FixedIn/By: Problem Type: BugImpact: ModerateDifficulty: EasyFrequency: EverytimePriority: System: Operating SystemSubsystem: Generic File OperationsMachine: Disk: Lisp Version: 31-Aug-84 16':17':57Source Files: Microcode Version: 5124Memory Size: 4096File Server: Server Software Version: Disposition: [submitted as fixed]'["Masinter" " 2-Sep-84 16':41':48"]Description: Date': 22 Aug 84 02':32 PDT'From': JonL.pa'Subject': Lisp': BREAKCONNECTION seems to damage the hashfile WHEREIS'To': LispSupport.pa'cc': Burton,vanMelle,JonL.pa''Lisp System Date': 15-Aug-84 20':42':17'Machine': Dorado (Darwin)'Microcode version': 24,4'Memory size': 10000'Frequency':  Intermittent'Impact': Serious''I think this may be "Frequency': Always" now.  I''ve often managed to recuperate by diddling with SYSHASHFILELST and SYSHASHFILE and WHEREIS.HASH, but one would like to think that this is unnecessary.''If there''s an AR here, it probably should be against the HASH file package.''-- JonL --'''LMM': the problem was that BREAKCONNECTION was calling CLOSEF on the streams, and the WHENCLOSE hack on "machineindependent" didn''t execute any of the WHENCLOSE forms if you called it on a STREAM.''I took WHENCLOSE off MACHINEINDEPENDENT and built in what little was necessary into AOFD (using STREAMPROP)'''Workaround: Test Case: Edit-By: MasinterEdit-Date:  2-Sep-84 16':41':50</pre>
  </body>
</html>
