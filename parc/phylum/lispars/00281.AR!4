Number: 281Date: 23-Mar-84 12':19':44Submitter: Sannella.PASource: Kaplan.paSubject: Last char of piece gets droppedLisp Version: Description: 'Date': 20 Mar 84 21':03 PST'From': Kaplan.pa'Subject': Lafite': Undelivered mail?'To': LafiteSupport.pa'Lafite-System-Date': 28-Feb-84 13':10':33'Lisp-System-Date': 13-Mar-84 10':21':31'Machine-Type': Dorado''This message was returned to me, saying that SRI-A.AG was found.  But the address in the message header is SRI-AI.AG.  Why didn''t it see the "I" ?''Subject': Undelivered mail'From': PinotNoir.ms (a Grapevine mail server)'To': Kaplan.pa'Date': 20-Mar-84 19':29':55 PST''The message sent by Kaplan.pa at 20-Mar-84 19':28':51 PST could not be delivered to the following recipients because they were rejected by the MTP server "Maxc".  The reason given was': Sorry, I never heard of an ARPA domain named "SRI-A"''Lauri@SRI-A.AG''----------------''Date': 20 Mar 84 19':28 PST'From': Kaplan.pa'Subject': New LFG system':  New editting interface'To': Halvorsen.PA, Bresnan.PA, Withgott.PA, Roach.PA, JRoberts.PA, Ishikawa.PA, Wescoat.PA, Kaplan.PA,CKiparsky.PA,Lauri@SRI-AI'cc': Kaplan.pa''There is a new LFG sysout on {Phylum} with the new TEdit interface for rules and lexical entries.  This means that you can switch back and forth between different editting activities and between editting and parsing........''-----''Date': 23 Mar 84 11':39 PST'From': vanMelle.pa'Subject': Re': Lafite': Undelivered mail?'In-reply-to': Kaplan.pa''s message of 20 Mar 84 21':03 PST'To': TEditSupport.pa'cc': Halvorsen, Kaplan.pa, Burton, LafiteSupport.pa''Kris also reported a bug like this a long time ago.''The problem is a bug in the Text device''s method for PEEKBIN.  At least in the case I observed, if \TEXTPEEKBIN is called when COFFSET=CBUFSIZE, i.e., when it is time to "turn the page", or in Tedit''s case, go for the next piece, it sets CBUFSIZE for the next piece one too small, which means that the last character of the piece gets dropped, which often happens to be the last character of an address.''TeditSupport': if you''d like a nice reproducible case, do the following': Forward a random message (say this one).  In the cc': field, where it says, say, "cc': Sybalsky.pa", replace "Sybalsky" by shift-selecting some other address out of the forwarded message, say "Burton".  Break the function \SENDMESSAGE2 and deliver the message.  The recipients as parsed by Lafite are an argument to that function, and you can see where the character was dropped.''	Bill''-----''Date': 23 Mar 84 12':38 PST'From': Sheil.pa'Subject': Lisp': TEdit/Lafite': Shift select into To': on Forward'To': LispSupport.pa''Lisp-System-Date': 15-Mar-84 00':13':18'Machine-Type': Dolphin''If you forward a message, then extend the invert selection from >>Recipient<< to include the following CR and the "cc':Sheil.pa" field that follows on the next line (NOT including the CR) [so that what is typed next replaces both the addressee and leaves no cc field] and then shift select a name out of the text of the mesage being forwarded, then all looks fine.''Problem is that when you try and send the message, Lafite does not see the last character of the To': field, so complains with a message like "Unrecognized recipient': Foo.p" (where the actual value is "Foo.pa").''Retyping the To': field name (including the CR) makes all work fine.''Beau''Workaround: Test Case: Edit-By: Sannella.PAEdit-Date: 19-Jun-84 18':58':07Attn: Assigned To: Sybalsky.paIn/By: CarolDisposition: '[Date': 27 Mar 84 09':57 PST'From': Sybalsky.pa'Subject': Lisp': AR 146, 281 fixed (TEdit peekbin/backbin)]System: TextSubsystem: TEditMachine: Disk: Microcode Version: Memory Size: File Server: Server Software Version: Difficulty: Frequency: IntermittentImpact: SeriousPriority: AbsolutelyStatus: ClosedProblem Type: BugSource Files: 