Number: 294Date: 26-Mar-84 13':34':42Submitter: Sannella.PASource: Stansbury.paSubject: SINGLEFILEINDEX fails to list some recordtypesAssigned To: JonlAttn: Status: ClosedIn/By: HarmonyProblem Type: BugImpact: AnnoyingDifficulty: Frequency: IntermittentPriority: PerhapsSystem: Other SoftwareSubsystem: Machine: Disk: Lisp Version: Source Files: Microcode Version: Memory Size: File Server: Server Software Version: Disposition: '[Date': 12 Apr 84 23':43 PST'From': JonL.pa'Subject': AR 294'Fixed on <LispCore>LIbrary>, as per my comment of Apr 3.]'["Sannella.PA" "22-Aug-84 17':43':25" Attn': Status':(Fixed->Closed) In/By':]Description: 'Date': 25 Mar 84 15':44 PST'From': Stansbury.pa'Subject': Lisp': Singlefileindex'To': LispSupport.pa'cc': Stansbury.pa'Lisp-System-Date': 15-Mar-84 00':13':18'Machine-Type': Dorado''Fails to list a records entry for recordtypes not on the usual clisprecordtypes.  ''-- Tayloe.''-----''Date': 29 MAR 84 11':42 PST'From': JONL.PA'Subject': Re': AR 294': SINGLEFILEINDEX fails to list records'To':   Sannella, Jonl'cc':   Stansbury''In response to the message sent  26 Mar 84 13':36':36 PST (Monday) from Sannella.PA''See the documentation on teh extensions to SINGLEFILEINDEX -- the'variable DEFAULTINDEXEDTYPESLST holds the "driver" for what things will'be indexed.  I think the documentation is clear enough for a user to add'to the entry on DEFAULTINDEXEDTYPESLST under "RECORD".  If not, then the'documentation should be upgraded.''-----''Date': 29 Mar 84 14':41 PST'From': Stansbury.pa'Subject': [JONL.PA': Re': AR 294': SINGLEFILEINDEX fails to list records]'To': Jonl, Lispsupport.pa'cc': Stansbury.pa''Yes, changing DEFAULTINDEXEDTYPESLST will do the trick, but that is unnecessarily inconvenient. ''I would argue that DEFAULTINDEXEDTYPESLST ought to allow for indirection, and indirect the kinds of records indexed to the current value of CLISPRECORDTYPES.  ''-- Tayloe.''-----''Date':  2 Apr 84 21':00 PST'From': JonL.pa'AR 294 -- I decline.  Further comments': An automatic interface with '        "indirection" as suggested in this AR is not feasible (in general)'        since SINGLEFILEINDEX is taking a rather limited, local-context'        look at the expressions on the file while it is trying to parse it'        looking for definitions.  The documentation mentions this "heuristic"'        approach at finding the definitions.  I really speeds things up to '        do it this way (orders and orders of magnitude!)''-----''Date':  3 APR 84 17':37 PST'From': JONL.PA'Subject': AR 294 re-vivified!'To':   LispSupport'cc':   Stansbury, Tong''Yesterday I "declined" this AR, but after talking it'over with Tayloe, it indeed does appear to be the case that this particular'instance will work with "indirection" -- the condition must be that the'"name" for the definition must be exactly the name for the function which'MAKEFILE uses to output the definition on the file.''Thus, e.g., ASSOCRECORD has this property, since that is the name for the'kind of record and its definition will appear on a fil as'(ASSOCRECORD <foobar> ...)'whereas BITMAPS won''t work because BITMAPS is the filepkg name for the'definition, but it is output on a file by MAKEFILE as'(RPAQ <foobar> ...)''In light of all this, I''m attempting to add this "indirection" feature'to SINGLEFILEINDEX, for records to indirect through the value of'CLISPRECORDTYPES, to be in the next version on [Phylum]<LispCore>Library>.'There is a protocol that governs what goes on CLISPRECORDTYPES, and it'gurantees the abovementioned property.'Workaround: Test Case: Edit-By: Sannella.PAEdit-Date: 22-Aug-84 17':43':26