<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [phylum]&lt;LispARs>00521.AR!5</title>
  </head>
  <body>
    <pre>
Number: 521Date:  5-Apr-84 12':39':05Submitter: Sannella.PASource: DEUTSCH.PASubject: DMPHASH prints out (PUTHASH 1 2 NOBIND)Assigned To: Attn: Status: ClosedIn/By: Problem Type: BugImpact: ModerateDifficulty: Frequency: EverytimePriority: PerhapsSystem: Language SupportSubsystem: Storage Formats/MgtMachine: Disk: Lisp Version: Source Files: Microcode Version: Memory Size: File Server: Server Software Version: Disposition: '["Sannella" "20-Aug-84 18':36':43" Attn': Status':(Fixed-&gt;Closed)]Description: 'Date':  5 APR 84 09':20 PST'From': DEUTSCH.PA'Subject': DMPHASH is broken'To':   LispSupport''Here is a dribble script made on Maxc just now':''NIL'3&larr;(SETQ HH (HARRAY 20]'{HARRAYP}#541502'4&larr;(PUTHASH 1 2 HH]'2'5&larr;(DMPHASH HH]'(RPAQ HH (HARRAY 23))'(PUTHASH 1 2 NOBIND)'NIL'6&larr;DRIBBLE]''Note the NOBIND in the PUTHASH.''P. D.''-----''Date': Thu, 5 Apr 84 13':33':14 PST'From': Deutsch.pa'Subject': AR # 521'To': LispSupport'In-Reply-To': "Sannella''s message of Thu, 5 Apr 84 12':40':08 PST"''Examining the code for DMPHASH with EDITA makes it clear that the problem results from DMPHASH being compiled in a way that results in ARRAYNAME not being bound as a specvar, so that the free reference in the functional argument of MAPHASH doesn''t find the correct value.''-----''Date':  5 Apr 84 17':17 PST'From': Masinter.pa'Subject': AR#521'To': LispSupport'cc': Deutsch''This is Interlisp-10 only (i.e., same script works in Interlisp-D). I''m not sure when I''m going to do my next Interlisp-10 loadup; I was actually hoping not to do any more on Maxc at all before Maxc''s decommission. Set Priority': Possibly, Attn Masinter.''Workaround': use UGLYVARS and HPRINT instead of DMPHASH to save and restore hash arrays.''-----''Date':  6 Apr 84 14':42 PST'From': Kaplan.pa'Subject': Re': AR 521': DMPHASH prints out (PUTHASH 1 2 NOBIND) --addenda'In-reply-to': LispSupport.pa''s message of 6 Apr 84 10':16':49 PST (Friday)'To': LispSupport.pa''For some reason this behavior does not show up on D, only in 10, although from the code even in D it is surprising that we haven''t seen the problem.''Anyway, I fixed the code (MACHINEINDEPENDENT), and the fix will appear in 10 whenever we do another 10 loadup.''Mark this as fixed.''--Ron'Workaround: Test Case: Edit-By: SannellaEdit-Date: 20-Aug-84 18':36':44</pre>
  </body>
</html>
