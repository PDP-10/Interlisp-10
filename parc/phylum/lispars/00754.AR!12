Number: 754Date: 18-Apr-84 14':48':33Submitter: Sannella.PASource: Wallace.paSubject: Embedded space in Domain in user.cm causes MP 0915 in diagnosticsLisp Version: Description: 'Date': 14 Apr 84 07':49 PST'From': Wallace.pa'Subject': Lisp': Can''t run disgnostics on DLION'To': LispSupport.pa'Cc': 3lispsupport^''Lisp System Date': 12-Apr-84 16':45':05'Machine': Dorado (Ventana)'Microcode version': 24,2'Memory size': 10000'Frequency': Always'Impact': Serious''We can''t get the boucing-box disgnostics to run on a DLION once lisp has been installed.  The field circus people use them to fix the machines, so this is serious.''-----''Date': 14 APR 84 09':15 PST'From': MASINTER.PA'Subject': Can''t run diagnostics on DLION'To':   Wallace'cc':   LispSupport''Kris Halvorsen runs them all the time. I''ve run them before. What did you try to do, and how did it fail?''-----''Date': 17 APR 84 20':49 PST'From': MASINTER.PA'Subject': diagnostics on DLion'To':   JFung.pasa'cc':   LispSupport, Wallace, 3lispsupport^''Jim desRivieres mentionedd to me in the hallway more details -- he apologized that he hadn''t had time to type in more details.''Basically (as far as I can tell), they cannot get the OnLine diagnostics to run on ANY of the machines at CSLI. The "bouncing box" DOES show up, but attempting to start the Diagnostics causes the system to halt with a 0915 in the maintenance panel.''This is my second-hand reconstruction of the events at CSLI. I''d appreciate it if 3LispSupport^ could confirm my reconstruction or supply the correct details.''Larry''-----''Date': 18 Apr 84 10':05':20 PST (Wednesday)'From': JFung.pasa'Subject': Re': diagnostics on DLion'In-reply-to': MASINTER.PA''s message of 17 APR 84 20':49 PST'To': MASINTER.PA'cc': JFung, LispSupport.PA'''Yes, I have seen this happening before.  But I cant recall the workaround or cause right now.  I''ll try this out here and let you know asap.''-----''Date': Thu, 19 Apr 84 10':21 PST'From': desrivieres.PA'Subject': Re': diagnostics on DLion'In-reply-to': "MASINTER''s message of 17 APR 84 20':49 PST"'To': MASINTER'cc': JFung.pasa, LispSupport, Wallace, 3lispsupport^'Reply-To': desrivieres.PA''Thanks for seting the record straight Larry.  Indeed, we are unable to start the Diagnostics on any CSLI Dlion.  Diagnostics *do* work just after we''ve read InstallLispTool off of floppies, but consistently fail to work (MP0915) after we have installed our 5 floppy (10000 page) sysout onto our 16200 page Lisp volume.'''---Jim''-----''Date': 19 Apr 84 16':24':52 PST (Thursday)'From': JFung.pasa'Subject': CSLI help'To': Le'cc': Masinter.pa, LispSupport.pa, Sheil.pa, Raim, desrivieres.PA, JFung''Thu, When you are in PARC next Monday, if you have time can you drop to see Jim desrivieres about his problem and find out about the date of his InstallationUtility floppy and InstallLispTool please.  ''P.S.	You dont have to go to SU to see the problem, but just find out about what version of tool & floppy he is using.  Thanks.  '...''-----''Date': Fri, 20 Apr 84 06':37 PST'From': desRivieres.PA'Subject': Re': CSLI help'In-reply-to': "JFung.pasa''s message of 19 Apr 84 16':24':52 PST (Thursday)"'To': Le.pasa'cc': JFung.pasa, Masinter, LispSupport, Sheil, Raim.pasa, desrivieres''Thu,''My InstallLispTool identifies itself as''     XSIS':Xerox Install Lisp Tool of 26-Jan-84 17':20 on Pilot vers. 10.0''I plan to be at Parc on Monday and would appreciate it if you would drop by my office (rm 1660) and I can tell you about my experiences with that part of the Interlisp world.  We could also track down more details on the Prometheus script I''m using, etc.''Regards, Jim''-----''Date': 23 Apr 84 15':14':48 PST (Monday)'From': Sannella.PA'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': Masinter''s message of 20 Apr 84 15':04':05 PST (Friday)'To': Masinter'cc': desRivieres, Le.pasa, JFung.pasa, LispSupport, Sheil, Raim.pasa''Today, Thu Le and I tried loading the 3-Lisp sysout using the very latest installation floppies.  The problem (starting diagnostics after loading large sysout gives MP 915) didn''t go away.  Therefore, we can be sure that this is NOT a problem of mismatched versions --- this is a real, outstanding bug.''-----''Date': 23 Apr 84 16':31':49 PST (Monday)'From': JFung.pasa'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': Sannella.PA''s message of 23 Apr 84 15':14':48 PST (Monday)'To': Sannella.PA'cc': Masinter.PA, desRivieres.PA, Le, JFung, LispSupport.PA, Sheil.PA, Raim''I can not create the problem on a standalone system here.  Are they running the same boot files as we are?  I dont think the size of the lisp sysout has anything to do with this, how large is their Diagnostics volume (3500 pages?)  If you can you get me the software configurations, I''ll try it here, (put on a file server).  I hate to suspect hardware.''-----''Date': 23 Apr 84 16':56':33 PST (Monday)'From': lispar.auto'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': JFung.pasa''s message of 23 Apr 84 16':31':49 PST (Monday)'To': JFung.pasa'cc': Sannella.PA, Masinter.PA, desRivieres.PA, Le.pasa, LispSupport.PA, Sheil.PA, Raim.pasa''Thu and I re-configured one of the Dlions exibiting this problem using the latest installation floppy (that Thu brought here this morning).  When we tried to install the large sysout file [phylex':XSIS North]<desRivieres>3-lisp.sysout, we got into the state I described.  Why don''t you try installing that sysout down there?  All the evidence seems to indicate that the size of the lisp sysout IS the determining factor.''-----''Date': 23 Apr 84 17':12':13 PST (Monday)'From': JFung.pasa'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': lispar.auto''s message of 23 Apr 84 16':56':33 PST (Monday)'To': lispar.auto'cc': JFung, Sannella.PA, Masinter.PA, desRivieres.PA, Le, LispSupport.PA, Sheil.PA, Raim''How about add me as CH user account for XSIS North, and I''ll try it.  Seeing is believeing.''-----''From': masinter.pa'Date': 24-Apr-84  8':40':05 PST'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': JFung.pasa''s message of 23 Apr 84 18':08':53 PST (Monday)'To': JFung.pasa'cc': Sannella, Masinter, desRivieres, Le.pasa, LispSupport, Sheil, Raim.pasa''Jerry, if they get a machine in 915 up here, can''t you use the remote debugging features of CoPilot to look at it from down there.''I''ve been following the messages and I think you should be more willing to believe that there is a problem that you need to fix. Thu and Michael went to some effort to reproduce CSLI''s problem at PARC.''-----''Date': 23 Apr 84 18':08':53 PST (Monday)'From': JFung.pasa'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': Sannella.PA''s message of 23 Apr 84 15':14':48 PST (Monday)'To': Sannella.PA'cc': Masinter.PA, desRivieres.PA, Le, JFung, LispSupport.PA, Sheil.PA, Raim''I retrieved my note and I found a line I said, "domain name of XSIS North" causes Diagnostics to crash at 915.  I knew I saw this before, but I could not recall the cause, here it is.  This same problem has occured to me when I was having problems of parsing the user.cm domain token under Install Tool and SetProfile Tool. ''I believe if you delete the domain entry on your user.cm that should fix the problem.''Actually I am going to try it out, but they locked up the training room and hence access to Dlion.  I''ll try it tomorrow morning.  Be patient....'''/Jerry''-----''Date': 24 Apr 84 12':27':57 PST (Tuesday)'From': Sannella.PA'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': JFung.pasa''s message of 23 Apr 84 18':08':53 PST (Monday)'To': JFung.pasa'cc': Sannella, Masinter, desRivieres, Le.pasa, LispSupport, Sheil, Raim.pasa''OK, it looks like you were right --- this is a manifestation of the "can''t have space in domain name" bug.''This morning, I initialized a new DLion using the Floppies that Thu Le brought up yesterday, and I had the same problem (starting diagnostics -> 915), even BEFORE I loaded any sysouts onto the machine.''I think that the reason that it was so hard to figure out what was going on was that the domain is only read from the user.cm the NEXT time that the machine is 1-booted.  Therefore, if you set the domain to "XSIS North" using the bouncing box profile tool, and immediately start up the diagnostics, they work fine.  However, the next time that the machine is 1-booted, it reads the user.cm that the profile tool has created, and starting diagnostics crashes.''A reasonable sequence of actions when initializing the machine is to run InstallLispTool to get the bouncing square, run the profile tool from there, and load and start a sysout.  The next time that you get back to the bouncing square, you can''t run diagnostics, so it is natural to assume that loading the sysout caused this.''Jim --- here is the fix (I''ve tried it on the DLion in Rm 1635, which had 3-lisp loaded)':  (1) From the bouncing box, bring up the profile tool (both buttons).  (2) Flush the domain (or set it to something with no imbedded spaces)  --- you can  reset it inside the InstallLispTool when you load a sysout.  (3) Button "Start Profile" and "Quit".  (4) 1-boot the machine, which will eventually give you the bouncing square again.  Now, you should be able to start the diagnostics from the bouncing square.'''Jerry --- AR 394 was marked fixed, because you fixed the sub-problem where domains with embedded spaces in the user.cm would not show up in the InstallLispTool form.  I am changing the subject of AR 394 from "Can''t have embedded space in Domain spec in user.cm" to "Embedded space in Domain in user.cm doesn''t show up in InstallLispTool Form".  I am changing the subject of AR 754 from "Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915" to "Embedded space in Domain in user.cm causes MP 0915 in diagnostics"''-----''Date': 24 Apr 84 12':59':15 PST (Tuesday)'From': JFung.pasa'Subject': Re': AR 754': "Embedded space in Domain in user.cm causes MP 0915 in diagnostics"'In-reply-to': Sannella.PA''s message of 24 Apr 84 12':27':57 PST (Tuesday)'To': Sannella.PA'cc': JFung, Masinter.PA, desRivieres.PA, Le, LispSupport.PA, Sheil.PA, Raim''Mike,''I really appreciated your effort on solving this problem (& Thu & Larry).  Next time, I shall keep a diary so I can reall the problem easily,  I did not let this one bother me, since I thought standalone systems will NOT use domain/org parameters etc.''This is the second bug uncovered in Versatec''s code, the first one was a workaround on frozen keyboard once echo-test window had been edited.''Now, what shall we do, I believe I can fix this one also, but I am not sure whether Versatec prefers to maintain their code,  I shall send Bruce Malasky a message see what he says.''BTW, thanks for your consideration in changing the AR subject title, it is important to have the title precise yet easily reflects the cause of the problem.  ''If no one objects, I shall pospone this change with the Klamath''s upgrade.''P.S.	Thanks for adding me to Phylex.''/Jerry''-----''Date': 24 Apr 84 15':57 PST'From': Sheil.pa'Subject': Re': AR 754': "Embedded space in Domain in user.cm causes MP 0915 in diagnostics"'In-reply-to': JFung.pasa''s message of 24 Apr 84 12':59':15 PST (Tuesday)'To': JFung.pasa'cc': Masinter.PA, LispSupport.PA, Raim.pasa''Jerry':''I don''t have the least doubt what you should do. ''1) Make the change to the Versatec diagnostics that is required to fix the bug'2) release a new version that will be installed on new machines for the time being'3) send a copy of the patch to Versatec along with a description of what it is intended to fix'4) and then see if they accept it.''If they accept it or a modified version of it, they will thank you for saving thm work. If not, you have the patch that you can apply to their next version. In any event you solve the problem now, rather than in October. Don''t wait for Klamath - that has got nothing to do with it.''Beau''-----''Date': 24 Apr 84 16':43':49 PST (Tuesday)'From': JFung.pasa'Subject': Re': AR 754': "Embedded space in Domain in user.cm causes MP 0915 in diagnostics"'In-reply-to': Sheil.pa''s message of 24 Apr 84 15':57 PST'To': Sheil.pa'cc': JFung, Masinter.PA, LispSupport.PA, Raim''All right.  I have no objection of fixing it.  I think Doug Robers probalby have made copies of the floppies for distribution.  He dropped by to my office yesterday and asked me to make sure there are no more new versions.''BTW, I''ve corresponded to Bruce, but like you suggested, when I fix it, I''ll send him the patches.''-----''Date': 24 Apr 84 14':20':18 PST (Tuesday)'From': JFung.pasa'Subject': Diagnostics package'To': Malasky.pa'cc': LispSupport.pa, JFung''Bruce,''Hope you had a good vacation.  I have uncovered two problems of using the Versatec''s diagnostics package, and I thought you would be interested.''The first one is the user interface from keyboard, it turns out that if you button the echo test function and editing(type-in) was done, that freeze the keyboard.  I found no fix for this one, but instead I changed the UI, by not using "SHIFT-T" instead using the mouse-buttons.  This is the workaround.''The second problem has to do with embedded space in user.cm token, it turns out we have a domain name of "XSIS North" and with is when activating the Diagnostic window, it crashes at MP 0915.''All of these are in regard to the Sierra''s version, may be you have them fixed in the Klamath''s release.  If not, will you be interested in fixing them? ''BTW, I am still waiting for your Klamath''s source when it is convenient to you.  ''Thanks for your attention.''/Jerry''-----''Date': Wed, 25 Apr 84 11':17 PST'From': desRivieres.PA'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': "Sannella''s message of 24 Apr 84 12':27':57 PST (Tuesday)"'To': Sannella'cc': JFung.pasa, Masinter, desRivieres, Le.pasa, LispSupport, Sheil, Raim.pasa''It''s a little more than just an embedded space in the domain name.  At CSLI the domain is "csli" and the organization is "stanford", yet we have this MP 0915 problem.''-----''Date': 25 Apr 84 11':37':23 PST (Wednesday)'From': JFung.pasa'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': desRivieres.PA''s message of Wed, 25 Apr 84 11':17 PST'To': desRivieres.PA'cc': Sannella.PA, JFung, Masinter.PA, Le, LispSupport.PA, Sheil.PA, Raim''Jim,''Are you sure your NS Clearinghouse server has the valid "csli" domain in the database?  If not that can cause a  915.  Is your file server accessabe via the Xerox''s internet?  If so, I can use your user.cm file and do a retrieve from here.  ''/Jerry''-----''Date': Wed, 25 Apr 84 12':12 PST'From': desRivieres.PA'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': "JFung.pasa''s message of 25 Apr 84 11':37':23 PST (Wednesday)"'To': JFung.pasa'cc': desRivieres, Sannella, Masinter, Le.pasa, LispSupport, Sheil, Raim.pasa''Jerry,''Stanford CSLI''s clearinghouse server serves domain "CSLI" organization "Stanford" (I believe these are the exact spellings.)  The file server is named "Franklin".  When I use the profile tool, I make the following settings (these spellings)':' '        User':   anonymous'        Password':   guest'        Domain':   csli'        Organization':   stanford'        NSLisp':   [franklin':]<lispsysouts>3-lisp.sysout'''CSLI''s dandelions at Stanford and SRI are not accessible via Xerox''s internet.''---Jim''-----''Date': 25 Apr 84 12':28 PST'From': Sheil.pa'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': JFung.pasa''s message of 25 Apr 84 11':37':23 PST (Wednesday)'To': JFung.pasa'cc': Masinter.PA, LispSupport.PA, Raim.pasa''Jerry':''In your msg to Jim you say "If (the local NS Clearinghouse server does not have the specified domain in its database) that can cause a  915".''Why? An MP break does not seem a reasonable way to report failure to find the relevant domain - why not a reasonable, human interpretable error msg?''Unless there is some very good reason, this seems like a high priority fix.''Beau''-----''Date': 25 Apr 84 12':34':32 PST (Wednesday)'From': JFung.pasa'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': desRivieres.PA''s message of Wed, 25 Apr 84 12':12 PST'To': desRivieres.PA'cc': Sannella.PA, Masinter.PA, LispSupport.PA, Sheil.PA, Kaplan.pa, 1100Support, JFung''Jim''This is to assure you that this is my top priority item.   FYI, I will be working on two problems which are all related to CSLI.  The second one is downloading of lisp sysout from the CSLI''s Unix system, this is a stopper to us on distributing Unix tape as I was told by Phil Young.  I''ve been working with Christopher on this.''Unfortunately, I dont know how to use Remote-debugging tool as suggested by Larry.'Thanks for your patience.''/Jerry''-----''Date': 25 Apr 84 12':39':44 PST (Wednesday)'From': JFung.pasa'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': Sheil.pa''s message of 25 Apr 84 12':28 PST'To': Sheil.pa'cc': JFung, Masinter.PA, LispSupport.PA, Raim''Beau,''I was trying to avoid dive into Versatec''s code, but it seems inevitable now.  I believe this MP 915 is orginated from the Versatec''s package and as usual it is always hard to digest someone else''s code. ''A confessed one.''-----''Date': 25 Apr 84 15':24':56 PST (Wednesday)'From': JFung.pasa'Subject': Re': AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'In-reply-to': JFung''s message of 25 Apr 84 12':34':32 PST (Wednesday)'To': desRivieres.PA'cc': Sannella.PA, Masinter.PA, LispSupport.PA, Sheil.PA, Kaplan.pa, 1100Support, JFung''Jim,''I just located the procedure that caused the MP 915.  (It is an Address Fault problem).''I dont have the fix yet, but I took out the procedure (which enumerates all the servers, a clearinghouse function, mailServer, fileServer & printServer).  I see no purpose of them right now, other than information.  They are displayed at the echo-test window, but they are not used as destination''s ID for echo purpose.''If you can wait I''ll keep on working, it gets to the Clearinghouse stuff.''One of my problem is I am not efficient in using Mesa''s debugger tool, I am learing though.  I guess I was warned about mesa''s jungle, when I was first assigned the project last September. ''The temporary version is filed at [rose]<lisp>fugue6>InstallLispTool.Jim in case you want to try out.  Mike can move to Phylum if you need it. ''/Jerry ''-----''Date': 30 Apr 84 10':42':13 PDT (Monday)'From': JFung.pasa'Subject': New version of InstallLispTool'To': desRivieres.pa'cc': LispSupport.pa, 1100Support, Sannella.PA, Masinter.PA, Sheil.PA, Kaplan.pa, Raim, Pahlavan, JFung''A new version of InstallLispTool is filed at [rose]<lisp>fugue6>InstallLispTool.bcd.  This version fixes AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915.''I''ll try to explain this in a separate message.''-----''Date':  1 May 84 12':03':02 PDT (Tuesday)'From': JFung.pasa'Subject': Problem report':  AR 754 Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915'To': (Distribution)'cc': desRivieres.PA, Sannella.PA, Masinter.PA, LispSupport.PA, Sheil.PA, Kaplan.pa, 1100Support, Pahlavan, JFung'''This message ATTEMPTS to describe the problem that Jim reported when running his Dlion at Stanford U.  Apparently a lot of confusions and some misleading information are associated during tracking of the problem.''The bug is in the Diagnostics code upon activating it, it performs a query to CH(Clearinghouse server) to enumerate all servers associated in that domain':organization.  These information are then displayed at the Echo-test window for documentation purpose(as far as I can see).  Your local CH server is used as the TEST-ID for Echo test.  So for example, if I am running at Pasadena, and use domain=XSIS North and Org.=Xerox, my local CH server is selected as the TEST processor for Echo, while all servers in "XSIS North" are enumerated.  Here, they are FS(FileServer': Phylex, StarFile), PS(PrintServer': LispPrint) and MS(MailServer': null).''In the course of enumerating CH servers, a lookup function is done for each property-ID, and if property-ID, domain, Org. are valid, then the entry information are extracted to build the text information.  For example, follwoing are displayed':''FS':	2-852-135-055  NET # 132 Phylex'	2-852-137-164  NET # 98  StarFile '	'PS':	2-852-136-955  NET # 132 LispPrint''MS':''The problem lies when the CH entry contains no data, but its LookUp function says ok, the code when trying to build this "human readable" text string, results a bad pointer dereference and thus caused the "Address Fault".''However, if you see "none" displayed" at the end of the server tail, this means the LookUp function fails, an example will be an invalid domain entry.''In Pasadena, we have the following servers registered, and since all entries are filled, we dont see the problem.'''FS':	2-852-128-929  NET # 1-207 Hungtington Library'	2-852-142-778  NET # 1-207 MARTIN '	2-852-130-301  NET # 1-207 Santa Anita'	'	'PS':	2-852-129-790  NET # 1-207 Chronicle'	2-852-127-946  NET # 1-207 Guardian'''MS':	2-852-128-929  NET # 1-207 MS/2'''I hope this explaination satisfies people''s curiosity, and I think a lot of you are interested in knowing the cause of the problem. ''/Jerry'Workaround: Test Case: Edit-By: masinter.PAEdit-Date: 17-Jul-84 21':17':33Attn: ReleaseAssigned To: JFung.pasaIn/By: Disposition: 'Date': 30 Apr 84 10':42':13 PDT (Monday)'From': JFung.pasa'Subject': New version of InstallLispTool'To': desRivieres.pa'cc': LispSupport.pa, 1100Support, Sannella.PA, Masinter.PA, Sheil.PA, Kaplan.pa, Raim, Pahlavan, JFung''A new version of InstallLispTool is filed at [rose]<lisp>fugue6>InstallLispTool.bcd.  This version fixes AR 754': Starting Online diagnostics (from bouncing box) causes halt w/ MP 0915.'System: Other SoftwareSubsystem: Installation UtilityMachine: Disk: Microcode Version: Memory Size: File Server: Server Software Version: Difficulty: ModerateFrequency: EverytimeImpact: SeriousPriority: Status: ClosedProblem Type: BugSource Files: 