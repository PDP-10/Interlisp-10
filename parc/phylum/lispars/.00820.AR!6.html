<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [phylum]&lt;LispARs>00820.AR!6</title>
  </head>
  <body>
    <pre>
Number: 820Date: 24-Apr-84 13':35':09Submitter: JFung.pasaSource: CSLI(Stanford U)Subject: InstallLispTool can''t install from unix PUP FTP server.Lisp Version: Description: Christopher Schmidt &lt;SCHMIDT@SUMEX-AIM.ARPA&gt; reported filure to retrieve lisp sysout from their unix 4.1 and 4.2 PUPFTP server.'''Return-Path': SCHMIDT@SUMEX-AIM.ARPA'Received': from SUMEX-AIM.ARPA by Xerox.ARPA ; 19 APR 84 15':52':52 PST'Date': Thu, 19 Apr 84 15':50':54 PST'From': Christopher Schmidt &lt;SCHMIDT@SUMEX-AIM.ARPA&gt;'Subject': DLion InstallLispTool &amp; TOPS-20'To': JFung.pasa'cc': Eric@SU-CSLI.ARPA, Spurgeon@SU-CSLI.ARPA, Atty@SU-CSLI.ARPA, nethax@SU-NAVAJO.ARPA'In-Reply-To': Message from "JFung.pasa@XEROX.ARPA" of Thu 19 Apr 84 11':21':54-PST''	Well, I tried the new tool, and it works with TOPS-20!  There'is one caveat, though.  I found I have to explicity set the VMemsize'to 8000 pages with SetVMem! first.'	I also tried it with our unix 4.1 and 4.2 PUPFTP server.  It didn''t'work, there.  I copied the tool log by hand (ugh!).  Ardvax is unix 4.2.''Vol=Lisp3'Opening conneciton to ardvax...Done.'Vax/Unix Server PUPFTP 1.23 at ardvax'.'Volume size = 33775 pages'Default Vmem size = 31775 pages'Free pages on volume = 25757'Fetching... sysout size = 8000 pages; 4096000 bytes'end of stream detected'512 bytes retrieved.'Closing connection to ardvax... Done.'installed.	''	I''ll make a PUP trace sometime and see what''s going on here...probably'not today.  My options board died, and I have to borrow a machine every time'I do a test.''-------''Return-Path': SCHMIDT@SUMEX-AIM.ARPA'Received': from SUMEX-AIM.ARPA by Xerox.ARPA ; 26 APR 84 11':13':42 PST'Date': Thu, 26 Apr 84 10':55':38 PST'From': Christopher Schmidt &lt;SCHMIDT@SUMEX-AIM.ARPA&gt;'Subject': InstallLispTool &amp; unix PUP FTP server'To': mogul@SU-NAVAJO.ARPA, JFung.pasa'cc': nowicki@SU-HNV.ARPA, croft@SU-SAFE.ARPA, yeager@SUMEX-AIM.ARPA'In-Reply-To': Message from "Jeff Mogul &lt;mogul@Navajo&gt;" of Tue 24 Apr 84 18':15':28-PST''	Bill Yeager and I logged an attempted boot of a dandelion off of'Safe (unix 4.1).  The log follows.'	It appears that the problem is that the InstallLispTool provides'a property list of ((User-Name schmidt)(User-Password passwd)'(Name-Body /d/lisp/fugue4/lisp.sysout)) which, according to the 4th'edition of the FTP spec (p. 7) is perfectly legal, and the server'should be able to make sense of.  Safe, however, seems to want to look'at the server-filename property only (which in this case, wasn''t'provided), and defaults this to the . file in /usr/schmidt.  Safe replies':'((Server-Filename .)(Name-body .)(Directory /usr/schmidt)(Author schmidt)'(Size 544)(Creation-Date 20-Mar-84 10':43':34)(Write-Date 20-Mar-84 10':43':34)'(Read-Date 26-Apr-84 09':29':46)(Type Binary)(Byte-size 8)).'	Thus, two solutions suggest themselves.  (1) Jerry can change'the ILT to present the filename as server-filename instead of'name-body (this sounds easy), or (2) someone can fix the unix FTP'server to recognize files specified piecewise.  This would be a lot of'work, but might extend nicely to accommodate the pseudo version numbers'that the leaf server is going to tack onto things.  The quick fix here'would be to use the name-body as server-filename if none was provided'and it began with a /, or the user''s default directory/name-body'if name-body didn''t begin with a slash.'--Christopher''-----''Return-Path': SCHMIDT@SUMEX-AIM.ARPA'Received': from SUMEX-AIM.ARPA by Xerox.ARPA ; 27 APR 84 14':45':11 PST'Date': Fri, 27 Apr 84 14':39':04 PST'From': Christopher Schmidt &lt;SCHMIDT@SUMEX-AIM.ARPA&gt;'Subject': Re':  InstallLispTool &amp; unix PUP FTP server'To': nowicki@SU-HNV.ARPA'cc': JFung.pasa, mogul@SU-NAVAJO.ARPA, croft@SU-SAFE.ARPA, yeager@SUMEX-AIM.ARPA'In-Reply-To': Message from "Bill Nowicki &lt;nowicki@Diablo&gt;" of Thu 26 Apr 84 16':39':26-PST''	I was able to boot a dandelion off of {safe} successfully'today!  I assume that it was the new PUP FTP server since {safe} was'cloned from {ardvax} since you put the new PUP FTP server up there.  I'didn''t run the test on {ardvax} because of its deaf ether interface.'	Jerry-- I did this with the old tool just to demonstrate that it'did not depend on your changes to accomodate TOPS-20.'--Christopher''-----''Date': 27 Apr 84 16':19':39 PST (Friday)'From': JFung.pasa'Subject': InstallLispTool now talks to Unix.'To': desRivieres.PA'cc': LispSupport.PA, Masinter.PA, Sheil.PA, Kaplan.pa, PYoung, 1100Support, Pahlavan, SCHMIDT@SUMEX-AIM.ARPA, JFung''Thanks to Christopher Schmidt''s effort, the InstallLispTool now talks to Stanfodr U. CSLI''s Unix system.  It turns out the Unix server was not honoring on one kind of FTP retrieve, and this is quickly fixed after Christopher identified the problem.  Anyone interested in the mail correspondence on this problem, can view it at [rose]&lt;lisp&gt;Sumex2.mail.''/Jerry''-----''Return-Path': @SUMEX-AIM.ARPA':HEDRICK@RUTGERS.ARPA'Redistributed': Xerox1100UsersGroup&uarr;.PA'Received': from SUMEX-AIM.ARPA by Xerox.ARPA ; 29 APR 84 16':41':57 PDT'Received': from RUTGERS.ARPA by SUMEX-AIM.ARPA with TCP; Sun 29 Apr 84 15':43':47-PDT'Date': 29 Apr 84 18':45':03 EDT'From': Charles Hedrick &lt;HEDRICK@RUTGERS.ARPA&gt;'Subject': fix to PUPFSV'To': 1100users@SUMEX-AIM.ARPA''The version of PUPFSV that we have (which came from Stanford) ignores'the NAME-BODY property in the DIRECTORY command.  This means that'DIRECTORY''s in Interlisp take a long time, as the 20 sends back all'files.  At the moment Interlisp filters the list, and prints out only'what you asked for.  But it slows things down noticably, since'directories require a handshake for each file.  Here is the relevant'code, from the file PUPFSV.MAC, in C.DIR.  The lines changed are flagged'with [10].  This problem does not show up in directory commands issued'from the 20, because the 20 uses SERVER-FILENAME instead of NAME-BODY.''	MOVEI A,TEMP		; Where to build GTJFN% command list'	MOVEI B,FILPRP		; Where property list is now'	CALL FIXNAM		; Fix args, build command list'	SKIPN C,.GJGEN(A)	; Version specified?'	 MOVEI C,.GJALL		; No, default to *'	TXO C,GJ%OLD!GJ%IFG	; Old file, permit "*"'	MOVEM C,0(A)'	HRROI C,[ASCIZ /*/]	; Default name and extension to *'	SKIPN .GJNAM(A)		;[10] unless already have a name'	 MOVEM C,.GJNAM(A)	;[10] default it'	SKIPN .GJEXT(A)		;[10] unless already have an extension'	 MOVEM C,.GJEXT(A)	;[10] default it'	HRROI B,FILPRP+P.SFIL'	GTJFN%			; Lookup the Server-Filename string'-------'Workaround: Test Case: Edit-By: masinter.PAEdit-Date: 17-Jul-84 21':41':46Attn: ReleaseAssigned To: In/By: Disposition: [5/1/84 tl':]System: Other SoftwareSubsystem: Installation UtilityMachine: Disk: Microcode Version: Memory Size: File Server: VAX/UNIXServer Software Version: Difficulty: HardFrequency: EverytimeImpact: FatalPriority: AbsolutelyStatus: FixedProblem Type: Design - ImplSource Files: </pre>
  </body>
</html>
