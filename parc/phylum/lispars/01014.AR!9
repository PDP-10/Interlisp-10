Number: 1014Date:  9-May-84  1':24':42Submitter: le.pasaSource: halvorsen.pa/JFungSubject: Cant SET VMEM to increase vmem size after retrieving sysoutLisp Version: Description: 'There seems to be an incompatability between how the InstallLispTool reads/sets the VMem and the VMEMSIZE function inside lisp.''When a sysout is installed from ILT, and then the VMEMSIZE is invoked inside Interlisp, the VMEMSIZE always returns the size as loadded from floppy via Prometheus script'---------------------''Date':  9 May 84 10':55 PDT'From': vanMelle.pa'Subject': Re': AR#1014, 1030 [VMEMSIZE should return size as set by InstallLispTool]'In-reply-to': le.pasa''s message of 9 May 84 09':12':56 PDT (Wednesday)'To': le.pasa, JFung.pasa, Halvorsen'cc': vanMelle.pa''VMEMSIZE never has meant, and never was intended to mean, "size of the virtual memory backing store".  It means "size of the Lisp virtual memory", i.e., how many pages in the virtual memory (an abstract notion) are in use.  It gives you some idea of how close you are to filling the backing store, assuming you know the size of same (e.g., on a Dolphin it is the size of the disk file Lisp.virtualmem).''Perhaps you want another function, SWAPPINGSTORESIZE ?''	Bill'--------------------------------------'Date':  9 May 84 13':00 PDT'From': halvorsen.pa'Subject': Re': AR#1014, 1030 [VMEMSIZE should return size as set by InstallLispTool]'In-reply-to': vanMelle.pa''s message of 9 May 84 10':55 PDT'To': le.pasa, JFung.pasa,vanMelle.pa,purcell''I agree with Bill.  However,  the important problem here is not what (VIRTUALMEMORYSIZE) returns.  The problem is that when  I grow the "vmemsize" (or SWAPPINGSTORESIZE) using Installlisptool from being smaller than my real memory to being larger, I had problems restarting lisp after a LOGOUT.  I usually never have problems restarting lisp after logout unless my swappingstore size is smaller than the size of the the (large) realmemory in my Dlion.  I took the problems I encountered in this situation to indicate that growing the vmemsize with installlisptool from smaller than the realmemorysize to larger didn''t cure the restart problem, as one would expecte it should.''				Kris'---------''Date':  4 May 84 16':51 PDT'From': halvorsen.pa'Subject': Lisp': Wrong type of booting on "Remote Boot" in InstallLispTool, and other  bugs and suggestions'To': LispSupport.pa, JFUNG.PASA''Also, when I get a sysout onto a volume then set the vmemsize to be larger than the default then select another volume and then go back and boot the volume where I set the vmemsize I discover when I get into lisp that the vmemsize is the default (volumesize minus 2000) rather than the value I explicitly set it to).  This is annoying since  in my case it had the consequence that LOGOUT from that volume didn''t work.  I have a large memoryboard and it requires a vmemsize larger that the realmemorysize.  The default vmemsize for the volume in question was smaller that realmemorysize.''-------------'Date': 10 May 84 16':14':08 PDT (Thursday)'From': Halvorsen.PA'Subject': Re': AR#1014'In-reply-to': JFung.pasa''s message of 10 May 84 12':30':30 PDT (Thursday)'To': JFung.pasa'cc': le.pasa, LispSupport, halvorsen, 1100Support.pasa''No, the problem is that I can''t restart lisp when I logout after using a sysout whose "vmem" size is set to larger than the realmemorysize by INSTALLLISPTOOL.  The important point here is that it is INSTALLLISPTOOLs growing of the vmemsize that doesn''t have the intended effect.  (The vmemsize always has to be larger then the realmemorysize if you are going to be able to continue after a logout on a machine with large memory ~4MB.  Usually it works, but it didn''t when I used setvmemsize to grow the vmemsize form 8000 to 12000 pages).''-------------'Date': 15 May 84 15':01 PDT'From': vanMelle.pa''I''m a little confused about what this AR is all about.  First off, the subject reads "Cant restart lisp after logout when VMem size gets larger than real memory size", a claim I don''t see anywhere in the dialog.  (This ar started out being "VMEMSIZE should return size as set by InstallLispTool".)''Various quotes from Kris':''"... when I grow the "vmemsize" ... using Installlisptool from being smaller than my real memory to being larger, I had problems restarting lisp after a LOGOUT"''"when I get a sysout onto a volume then set the vmemsize to be larger than the default then select another volume and then go back and boot the volume where I set the vmemsize I discover when I get into lisp that the vmemsize is the default (volumesize minus 2000) rather than the value I explicitly set it to"''"I can''t restart lisp when I logout after using a sysout whose "vmem" size is set to larger than the realmemorysize by INSTALLLISPTOOL"''From these I have different guesses as to what the complaint is':''1) Kris sets vmemsize to be big, retrieves a sysout, runs it, logs out, can''t resume it.''2) Kris retrieves a sysout, then uses the "set vmem size" command to make it larger, runs sysout, logs out, can''t resume.''3) ... well let''s stop there.''My guess is (2) rather than (1), and infer that the problem, if there is one, is that "set vmem size" has no effect until a retrieve is issued.  Perhaps this is just a documentation problem?  Could you elucidate which, if any, of my interpretations is correct?''The problem with big memory, for the record, is that the Lisp booting microcode only reads up to what looks like the end of the vmem file to it.  If that is less then real memory, and you have previously logged out after lisp "extended" the vmem, the booting process does not see the new pages, because the Lisp vmem extension is not done in a way that makes the new pages part of the vmem file (see AR 379).''-------------'From': halvorsen.PA'Date': 15-May-84 18':15':08 PDT''The subject field of the AR in question is incorrectly formulated, and I told JFUNG that in a mesage which I sent in a few days ago.''You are right that it is your second construal that is the best description of my problem.  I get a sysout onto a volume (in this case using "remote boot, i.e. copying from one volume to another).  I then increase the vmemsize using SET VMEM in th Installlisptool.  However, when I logout after running in the sysout on this volume I can not resume my lisp.''-------------'Date': 16 May 84 10':02':39 PDT (Wednesday)'From': jfung.pasa''1.	If anytime you have used remote-boot to copy sysout from one volume to another,  than the copied sysout (from destination volume) will not boot off again after logout form lisp.  This is a known problem and have received AR. (811/450)''2.	If you merely playing with SetVMem command and then not able to boot lisp off again, that will be a new problem.  This was the impression I got from your message. '''Workaround: Test Case: Edit-By: JFung.pasaEdit-Date: 20-Jun-84 17':39':35Attn: JFung.pasaAssigned To: In/By: Disposition: Beleive fixed in Carol. JFung 'System: Other SoftwareSubsystem: Installation UtilityMachine: Disk: Microcode Version: Memory Size: File Server: Server Software Version: Difficulty: ModerateFrequency: EverytimeImpact: ModeratePriority: HopefullyStatus: FixedProblem Type: BugSource Files: 