<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [phylum]&lt;LispARs>01028.AR!3</title>
  </head>
  <body>
    <pre>
Number: 1028Date:  8-May-84 18':16':09Submitter: le.pasaSource: Eric Schoen (Dering.pasa)Subject: FLOPPY.SCAVENGE and FLOPPY.COMPACT not robust enough -- can munge floppyAssigned To: Attn: Roach.paStatus: OpenIn/By: Problem Type: BugImpact: SeriousDifficulty: HardFrequency: IntermittentPriority: HopefullySystem: Operating SystemSubsystem: DLion FloppyMachine: Disk: Lisp Version: Fugue6Source Files: Microcode Version: Memory Size: File Server: Server Software Version: Disposition: [5/9/84 kbr': I''ll see what I can do.  For the time being, it might be a good idea to avoid cramming floppies past 75% full.]Description: ' FLOPPY.SCAVENGE and FLOPPY.COMPACT are not robust.  I have had interesting'experiences with both.  I was unable to fit a file onto a floppy, even though FLOPPY.FREE.PAGES reported I had plenty of space.  I assumed there weren''t enough contiguous blocks available, so I called FLOPPY.COMPACT.  This appeared'to work fine, as I was able to fit the rest of the files I needed onto floppy. Later, however, I discovered several files were "fractured" on the disk. LAPRD would bail out loading compiled files with bad compiled function errors, 'and it appears that pages of a file were interspersed in pages of other files.''Later, we ran into problems in which we continually got FILE SYSTEM RESOURCES EXCEEDED breaks (on a different floppy), with Interlisp telling us to scavenge the floppy, as it was "damaged."  Calling FLOPPY.SCAVENGE resulted'in calls to LISTPUT with a NIL list, which breaks, and several calls to PACKFILENAME with NIL arguments.  If I try to load the resulting floppy into the machine, I get further LISTPUT breaks.  Rescavenging helps, but there are'several files with names like ?0052 through ?0055, and a bunch of files named NIL.Workaround: Test Case: Edit-By: Sannella.PAEdit-Date:  8-May-84 17':35':28</pre>
  </body>
</html>
