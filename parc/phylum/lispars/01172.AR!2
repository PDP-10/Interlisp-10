Number: 1172Date: 21-May-84 16':45':16Submitter: Sannella.PASource: Masinter.paSubject: Compiler bug': OPENLAMBDAs being treated like LAMBDAsAssigned To: Attn: Status: ClosedIn/By: Problem Type: DocumentationImpact: SeriousDifficulty: ModerateFrequency: EverytimePriority: HopefullySystem: Language SupportSubsystem: Compiler, Code FormatMachine: Disk: Lisp Version: Source Files: Microcode Version: Memory Size: File Server: Server Software Version: Disposition: '["Sannella" "20-Aug-84 18':07':39" Status':(Fixed->Closed)]Description: 'Date': 11 May 84 17':32 PDT'From': masinter.pa'Subject': funny compiler bug'To': lispcore^'cc': masinter.pa''I''ve noticed an oddity in the compiler that caused compiling an OPENLAMBDA macro not to do as good a job as expanding the OPENLAMBDA macro and then compiling the result. The result is that the newly recompiled ADISPLAY exhibits poorer performance with the newly added KEYDOWNP1 macro than it did before -- substantially poorer performance. I will look into this, but beware.''-----''From': MASINTER.pa'Date': 11-May-84 21':41':31 PDT'Subject': compiler odd in latest loadup(s)?'To': lispcore^''I don''t know why it is that compiling'(KEYDOWNP ''CENTER) no longer expands the constants in line, but it makes me suspicious of the compiler inside <LispCore>Next>FULL.SYSOUT.''I suggest people exhibit some caution doing any wholesale recompiles until this is tracked down. ''If anyone is not running in the latest Full, it would be interested to find out when this stopped working; if you compile a function '(DEFINEQ (FOO ()(KEYDOWNP ''CENTER] and compile it, it should say that (CALLS ''FOO) merely references a variable...' (and doesn''t have a call to LRSH)''-----''Date': 14 May 84 09':54 PDT'From': Sheil.pa'Subject': Re': compiler odd in latest loadup(s)?'In-reply-to': MASINTER.pa''s message of 11-May-84 21':41':31 PDT'To': MASINTER.pa'cc': lispcore^.pa''Call to LRSH appears when compilation done in 26-apr full.sysout''-----''Date': 14 May 84 13':00 PDT'From': Masinter.pa'Subject': compiler problem found': OPENLAMBDAs were being treated like LAMBDAs'To': LispCore^'cc': Masinter.pa''An unfortunate side effect of attempting to fix the reported problem where the interpreter didn''t like OPENLAMBDA': I changed it so that a number of places DID know what OPENLAMBDA was, including ARGTYPE. This unfortunately ''broke'' the place in the compiler which only checked for OPENLAMBDA after it had decided that ARGTYPE of the function was NIL (unknown.)''I''m fixing the compiler, but files compiled since the interpreter change went in are suspected of having poorer compiled code than necessary. In some cases, it was A LOT worse.''...''Workaround: Test Case: Edit-By: SannellaEdit-Date: 20-Aug-84 18':07':40