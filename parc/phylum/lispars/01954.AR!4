Number: 1954Date: 25-Aug-84 10':55':42Submitter: Roach.paSource: Roach.paSubject: BREAK ttydisplaystreams tangled,  REVERT prints odd messageAssigned To: MasinterAttn: ReleaseStatus: FixedIn/By: Problem Type: BugImpact: SeriousDifficulty: Frequency: IntermittentPriority: PerhapsSystem: Programming EnvironmentSubsystem: Break PackageMachine: 1108Disk: Lisp Version: 22-Aug-84 00':45':52Source Files: Microcode Version: 5124Memory Size: 3071File Server: Server Software Version: Disposition: '["Sannella.PA" "27-Aug-84 15':41':21" Subject': Attn': Status':(New->Open) Priority':(->Perhaps)]'["Masinter" "10-Sep-84 18':37':17" Subject': Assigned% To': Attn': Status':(Open->Fixed)]'["Sannella.PA" "11-Sep-84 10':16':04" Description':]Description: A few crawly critters seem to have creeped into the BREAK package code recently.'(1) There have been a few times that I would do a ^D before a break window opens (because I knew I made an error), the break window opens, and I''m left with the top level "_" prompt in the break window.  If I do a BT, I get "STACK PTR HAS BEEN RELEASED", so I assume a RESET did happen, but ttydisplaystreams got confused.  I have to use TTYDISPLAYSTREAM to get back to the top level window.'(2) Some BREAK commands in some instances wind up printing my code in the top level window.  This is something that used to not occur, and it doesn''t appear to be a feature.'I noticed this during a REVERT.  I don''t remember if this happens with other commands.  Didn''t Larry say he was doing something to REVERT?'(3) Right at the moment, REVERT seems to be completely broken.  I''ve created 2 functions'     (DEFINEQ (BAR (LAMBDA () (FOO))))'     (DEFINEQ (FOO (LAMBDA () (BREAK1 NIL T))))'I was going to test bug (2).  So I''ve done (BAR), and I have the following exchange in my breakwindow':'     ----------------------'     !NIL break': 1        !'     !--------------------!'     !                    !'     !(broken)            !'     !82':REVERT FOO       !'     !FOO not found       !'     !(broken)            !'     !83':(STKPOS ''FOO)    !'     !#1,13436/FOO        !'     !84':REVERT BAR       !'     ----------------------'at event 82, I was able to verify that BAR & FOO appear in the stack using the BT menuitem.  After I am finished typing "REVERT BAR<CR>" for event 84, the break window closes,'the form (presumably BAR''s def)'     (LAMBDA NIL (BREAK1 (PROGN (* kbr': "25-Aug-84 10':35") (FOO))))'is printed in my top level window, and a new break window opens (as it does in a normal REVERT).  The bugs are': I wasn''t able to REVERT to FOO and when REVERTing to BAR had the curious side effect of printing lisp code in my top level window.''-----''Date': 10 Sep 84 18':39 PDT'From': Masinter.pa'Subject': AR#1954'To': ROACH'cc': LispSupport, Burton''Kelly,''I''ve marked this AR as fixed. The problem with REVERT was a temporary glitch that I since fixed. I can''t get any of the TTYDISPLAYSTREAM problems to happen again, and I''m willing to attribute them to problems since fixed.''If you run into any other problems like this in more recent loadups, please let me know. (I just fixed the problem about REVERT FOO where FOO is the last "real" frame before the BREAK not working -- it now works but fix will be in next loadup.)''Workaround: Test Case: Edit-By: Sannella.PAEdit-Date: 11-Sep-84 10':16':04