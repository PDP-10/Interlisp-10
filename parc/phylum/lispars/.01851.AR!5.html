<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [phylum]&lt;LispARs>01851.AR!5</title>
  </head>
  <body>
    <pre>
Number: 1851Date: 15-Aug-84 14':55':24Submitter: Sannella.PASource: MikeDixon.paSubject: Dlion clock lost ~11minutes over a week [SETTIME fixed it]Assigned To: Attn: vanMelle, MasinterStatus: OpenIn/By: Problem Type: BugImpact: AnnoyingDifficulty: Frequency: Priority: PerhapsSystem: Operating SystemSubsystem: OtherMachine: Disk: Lisp Version: Source Files: Microcode Version: Memory Size: File Server: Server Software Version: Disposition: '["Sannella.PA" "28-Aug-84 11':33':22" Subject': Description':]'["Sannella.PA" "31-Aug-84 09':28':16" Description':]'["Sannella.PA" "10-Sep-84 14':08':20" Description':]'["Sannella.PA" "13-Sep-84 09':50':57" Description':]Description: 'Date': 31 Jul 84 22':37 PDT'From': MikeDixon.pa'Subject': DLion clocks'To': (mitch) lichtenberg.wbst, (mike) sannella''hi.  i''d been running the same lisp sysout on my DLion for about a week or so, and just noticed that over that time the clock had lost about 11 minutes ((SETTIME) fixed it).  is that reasonable, or are they supposed to be more accurate?''-----''Date':  1 Aug 84 10':43':23 PDT (Wednesday)'From': Lichtenberg.WBST'Subject': Re': DLion clocks'In-reply-to': MikeDixon.pa''s message of 31 Jul 84 22':37 PDT'To': MikeDixon.pa'cc': (mitch) lichtenberg, (mike) sannella.pa''They''re supposed to be accurate.  Did you go into RAID for extended periods of time alot?''/Mitch.''-----''Date': 22 Aug 84 16':52 PDT'From': Masinter.pa'Subject': accuracy of DLion clock (Interlisp AR#1851)'To': Consultants&uarr;.es'cc': LispSupport'Reply-to': LispSupport''How accurate is the DLion clock? Is losing 11 minutes over the course of a week reasonable? (An Interlisp-D user didn''t reboot for a week and noticed his clock was off.)''-----''Date': 22 Aug 84 17':19':41 PDT (Wednesday)'Subject': Re': accuracy of DLion clock (Interlisp AR#1851)'In-reply-to': Masinter.pa''s message of 22 Aug 84 16':52 PDT'To': LispSupport.pa'cc': Consultants&uarr;.es'From': Bruce Hamilton &lt;Hamilton.ES&gt;'Reply-To': Hamilton.ES''	Is losing 11 minutes over the course of a week reasonable?''Probably.  I''ll ask Marzullo for a definitive answer.  I''ve always been mystified at how $15K computers don''t have $5.98 AC line frequency clocks.''--Bruce''-----''Date': 23 Aug 84 08':26':52 PDT (Thursday)'From': Menzies.es'Subject': Re': accuracy of DLion clock (Interlisp AR#1851)'In-reply-to': Masinter.pa''s message of 22 Aug 84 16':52 PDT'To': LispSupport.pa'cc': Menzies.es''DLion clocks are very accurate unless some hardware problem exists.  I suggest that you have you hardware folks check out the hardware of your machine.''-----''Date': 30 Aug 84 14':30':58 PDT (Thursday)'From': Marzullo.PA'Subject': Re': accuracy of DLion clock (Interlisp AR#1851)'In-reply-to': Hamilton.ES''s message of 22 Aug 84 17':21':02 PDT (Wednesday)'To': LispSupport, Consultants&uarr;.ES'cc': Marzullo'Reply-To': Marzullo.PA''Liz, Bruce - sorry for the long reply time, but I''ve been out backpacking and PODC-conferencing for ten days.''DLions derive their time of day clock from the line frequency, so most clocks maintain a very stable rate (over the long term). The actual clock is inmplemented in the IOP, however, and it can fail. The most common faults I have observed are':''	The line frequency jumper can be set for the wrong frequency,'	so the clock will run ~ 10% fast (or slow, if you''re in Europe'	or parts of Japan).'	'	A short in the MP can cause similar behavior in the clock rate. This'	is not that uncommon - maybe one in 300 machines.'	'	Very occasionally, a clock will race ahead. I haven''t observed this'	behavior in about a year. For example, a clock in Dallas once gained'	50 seconds every minute for over four hours.'	'	Clocks can stop. This is almos always due to the IOP being stopped'	by Burdock (a debugging system used by the microcode folks).'	'	A Dandelion can be unable to reliably set the value of the clock. Last'	time I talked with Milt ablut this, he thought it was due to a fault'	in the IOP board. This can give all sorts of odd behavior at boot'	time. Again, this seems to affect maybe one in 200 - 300 machines.'	'Liz - the TimeTracker hack purpose is to help shield XDE clients from failures in the time service. By periodically surveying the time service, a workstation will pick up more accurate times when they appear, and by the nature of it''s algorithm, it ignores flakey servers (in a "Byzantine-like fault tolerant manner", for those who knows what that means. If anybody is really interested in the algorithms, I''ll supply references to my thesis).''Larry - I would guess that the clock which was off by 11 seconds after a week did not uniformly drift that way. This is an error in the rate of about 0.001, which I have never seen. Then again, there are no Interlisp time servers, so I have no experience with DLion clocks and Interlisp. I really don''t know how Interlisp interacts with the IOP. I''d be interested in knowing whether the clock drifted uniformly or whether it got a bum time when the DLion was initially booted. Is it reproducable?''Keith''-----''Sender': Hamilton.ES'Date': 31 Aug 84 11':15':25 PDT (Friday)'Subject': Re': accuracy of DLion clock (Interlisp AR#1851)'To': LispSupport.PA'From': Marzullo.PA'Reply-To': Marzullo.PA, Hamilton.ES''----------------------------------------------------------------'Date': 31 Aug 84 09':25':45 PDT (Friday)'From': Marzullo.PA'Subject': Re': accuracy of DLion clock (Interlisp AR#1851)'To': Consultants&uarr;.ES'cc': 'Reply-To': Marzullo.PA''Hal makes a very good point here... from my observations of the pulses clock, a drift of 11 seconds a week is not unusual - in fact, it is rather good.''----------------------------------------------------------------'Date': 30 Aug 84 18':23':42 PDT'From': Murray.pa'Subject': Re': accuracy of DLion clock (Interlisp AR#1851)'In-reply-to': "Your message of 30 Aug 84 17':56':31 PDT (Thursday)"'To': Marzullo'Cc': Murray''Thanks for the info.''You may have overlooked one critical point. The LISP folks don''t necessarily use the real time of day clock on the DLion. I wouldn''t be at all surprised if their Dorado/Dolphin code derived it from the pulses clock, and they just used the same code on the DLions. A crystal could easily be off a second or two a day.''-----''Date': 12 SEP 84 21':47 PDT'From': MASINTER.PA'Subject': ar#1851 and DLion clock'To':   purcell, vanMelle'cc':   LispSupport''AR#1851, which is about a DLion whose clock runs slow, is due to the following anomoly':''DLions have both their crystal clock, and also a "time of day" clock. The "time of day" clock which is kept in the IOPAGE is reasonably accurate over the long time. However, the current system doesn''t use it for (IDATE)! Instead, it uses the "seconds" clock, which is kept up to date by the misc-stats timer.''There was a note from Consultants&uarr;.ES to LispSupport about this, but it was a little cryptic. The import was that the method we use for calculating IDATE on Dolphin and Dorado should have a Machinetype check in it and use the time out of the IOPage instead on a DLion.''SETTIME sets them both.''(IDATE calls DAYTIME on LLBASIC for some reason, and DAYTIME then immediately calls DAYTIME0. I couldn''t find a def for DAYTIME0 or a macro, but I did find \DAYTIME0, and I presume there is some magic which turns DAYTIME0 into \DAYTIME0 that I couldn''t find from home. )''There was some comment from a user about a $30000 computer keeping worse time than a $5 clock, etc.''I doubt if this is related, but for the record, I duplicated the problem where if you do a SYSOUT on a DLion and start it on a Dorado, the clock runs *way* too fast.''''''Workaround: Test Case: Edit-By: Sannella.PAEdit-Date: 13-Sep-84 09':50':58</pre>
  </body>
</html>
