(FILECREATED "25-Feb-88 22:37:39" {PHYLUM}<LISP>KOTO>PATCHES>LOCAL-KOTO-PATCHES.;2 4543         changes to:  (VARS LOCAL-KOTO-PATCHESCOMS)      previous date: "15-Jan-88 12:52:28" {PHYLUM}<LISP>KOTO>PATCHES>LOCAL-KOTO-PATCHES.;1)(* Copyright (c) 1988 by Xerox Corporation. All rights reserved.)(PRETTYCOMPRINT LOCAL-KOTO-PATCHESCOMS)(RPAQQ LOCAL-KOTO-PATCHESCOMS [(COMS (* ;; "functions associated with patches")				       (FNS NEW\IDLER)				       (FNS NEW\NS.SETTIME NEW\PUP.SETTIME)				       (MACROS WITHOUT.PAGEHOLD))				 [DECLARE: DONTEVAL@LOAD DOCOPY [COMS (* ;; 				"patch idler so that it can't start during i/o wait for password")								      (P (MOVD? (QUOTE \IDLER)										(QUOTE OLD\IDLER)))								      (P (MOVD (QUOTE NEW\IDLER)									       (QUOTE \IDLER]					   [COMS (* ;; 	   "patch 1186 etherhandling to make mp codes teleraidable where they were not before.  ")						 (* ;; "Masinter, 14-Oct-86")						 (P (CHANGENAME (QUOTE \DoveEther.TurnOn)								(QUOTE BLOCK)								(QUOTE NILL))						    (\LOCKFN (QUOTE NILL]					   (COMS (* The following fixes the DST problem.)						 (P (MOVD? (QUOTE \NS.SETTIME)							   (QUOTE OLD\NS.SETTIME))						    (MOVD (QUOTE NEW\NS.SETTIME)							  (QUOTE \NS.SETTIME)							  NIL T)						    (MOVD? (QUOTE \PUP.SETTIME)							   (QUOTE OLD\PUP.SETTIME))						    (MOVD (QUOTE NEW\PUP.SETTIME)							  (QUOTE \PUP.SETTIME)							  NIL T)						    (SAVESET (QUOTE \EndDST)							     303 T]				 (DECLARE: DONTEVAL@LOAD DOCOPY					   (P (WITHOUT.PAGEHOLD (WFROMDS (GETSTREAM T (QUOTE OUTPUT)))								(if (DEFINEDP (QUOTE TEDIT))								    then								    (FILESLOAD (SYSLOAD)									       TEDIT-CLOSE-ON-SHRINK))								(FILESLOAD (SYSLOAD)									   CORRECTTOLERANCE-PATCH 									   PATCH-LARGEIPBITMAP 									   PATCH-TWOSIDED 									   TEDIT-CLOSE-ON-SHRINK 									   CORRECTTOLERANCE-PATCH 									   FASTEDITBM])(* ;; "functions associated with patches")(DEFINEQ(NEW\IDLER(LAMBDA (FROMTIMEOUT) (* "N.H.Briggs" " 2-Nov-87 12:34") (* N.H.Briggs " 6-Jun-86 13:02") (DECLARE (GLOBALVARS \GETPASSWORD.LOCK)) (COND ((RESETLST (OBTAIN.MONITORLOCK \GETPASSWORD.LOCK T T)) (OLD\IDLER FROMTIMEOUT))))))(DEFINEQ(NEW\NS.SETTIME(LAMBDA (RETFLG) (DECLARE (GLOBALVARS \EndDST)) (* "N.H.Briggs" " 2-Nov-87 12:52") (OLD\NS.SETTIME RETFLG) (SETQ \EndDST 303)))(NEW\PUP.SETTIME(LAMBDA (RETFLG) (DECLARE (GLOBALVARS \EndDST)) (* "N.H.Briggs" " 2-Nov-87 12:52") (OLD\PUP.SETTIME RETFLG) (SETQ \EndDST 303))))(DECLARE: EVAL@COMPILE (DEFMACRO WITHOUT.PAGEHOLD (WINDOW &BODY FORMS)	  (BQUOTE (RESETLST (LET* ((TTYWINDOW , WINDOW)				   (ORIGINAL.PAGEFULLFN (WINDOWPROP TTYWINDOW (QUOTE PAGEFULLFN)))				   (NEW.PAGEFULLFN (FUNCTION NILL)))				  (RESETSAVE (WINDOWPROP TTYWINDOW (QUOTE PAGEFULLFN)							 NEW.PAGEFULLFN)					     (LIST [FUNCTION (LAMBDA (TTYWINDOW NEW.PAGEFULLFN 									      ORIGINAL.PAGEFULLFN)								     (COND								       ((EQ (WINDOWPROP TTYWINDOW											(QUOTE 										       PAGEFULLFN))									    NEW.PAGEFULLFN)									(WINDOWPROP TTYWINDOW										    (QUOTE PAGEFULLFN)										    									      ORIGINAL.PAGEFULLFN]						   TTYWINDOW NEW.PAGEFULLFN ORIGINAL.PAGEFULLFN)))			    ,@ FORMS))))(DECLARE: DONTEVAL@LOAD DOCOPY (* ;; "patch idler so that it can't start during i/o wait for password")(MOVD? (QUOTE \IDLER)       (QUOTE OLD\IDLER))(MOVD (QUOTE NEW\IDLER)      (QUOTE \IDLER))(* ;; "patch 1186 etherhandling to make mp codes teleraidable where they were not before.  ")(* ;; "Masinter, 14-Oct-86")(CHANGENAME (QUOTE \DoveEther.TurnOn)	    (QUOTE BLOCK)	    (QUOTE NILL))(\LOCKFN (QUOTE NILL))(* The following fixes the DST problem.)(MOVD? (QUOTE \NS.SETTIME)       (QUOTE OLD\NS.SETTIME))(MOVD (QUOTE NEW\NS.SETTIME)      (QUOTE \NS.SETTIME)      NIL T)(MOVD? (QUOTE \PUP.SETTIME)       (QUOTE OLD\PUP.SETTIME))(MOVD (QUOTE NEW\PUP.SETTIME)      (QUOTE \PUP.SETTIME)      NIL T)(SAVESET (QUOTE \EndDST)	 303 T))(DECLARE: DONTEVAL@LOAD DOCOPY (WITHOUT.PAGEHOLD (WFROMDS (GETSTREAM T (QUOTE OUTPUT)))		  (if (DEFINEDP (QUOTE TEDIT))		      then		      (FILESLOAD (SYSLOAD)				 TEDIT-CLOSE-ON-SHRINK))		  (FILESLOAD (SYSLOAD)			     CORRECTTOLERANCE-PATCH PATCH-LARGEIPBITMAP PATCH-TWOSIDED 			     TEDIT-CLOSE-ON-SHRINK CORRECTTOLERANCE-PATCH FASTEDITBM)))(PUTPROPS LOCAL-KOTO-PATCHES COPYRIGHT ("Xerox Corporation" 1988))(DECLARE: DONTCOPY  (FILEMAP (NIL (2008 2256 (NEW\IDLER 2018 . 2254)) (2257 2569 (NEW\NS.SETTIME 2267 . 2415) (NEW\PUP.SETTIME 2417 . 2567)))))STOP