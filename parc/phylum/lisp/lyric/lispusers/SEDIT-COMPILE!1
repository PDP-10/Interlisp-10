(DEFINE-FILE-INFO PACKAGE "USER")(FILECREATED " 8-Oct-87 13:23:05" {POGO:AISNORTH:XEROX}<CUTTING>LISP>SEDIT-COMPILE.;5 3107         changes to:  (FUNCTIONS USERSEDIT-COMPILE) (VARS SEDIT-COMPILECOMS)      previous date: " 8-Oct-87 13:20:36" {POGO:AISNORTH:XEROX}<CUTTING>LISP>SEDIT-COMPILE.;4)(* "Copyright (c) 1987 by Douglass Read Cutting.  All rights reserved.")(PRETTYCOMPRINT SEDIT-COMPILECOMS)(RPAQQ SEDIT-COMPILECOMS ((* ;; "Hack to add Compile commands to Lyric SEdit") (* ;; "Note: post-Lyric SEdit already has these commands.  Loading this file into a post-Lyric sysout is a no-op.") (DECLARE: EVAL@COMPILE DONTCOPY (FILES (LOADCOMP) SEDIT-DECLS)) (FUNCTIONS USERSEDIT-COMPILE USERSEDIT-EXIT) (ADDVARS (\\command.table.spec (USERSEDIT-COMPILE ("Compile		C-C" "Exit & compile (if editing a function)") ^C) ((USERSEDIT-COMPILE T) NIL 1,^C) ((USERSEDIT-EXIT NIL) NIL 1,^X))) (P (SEDIT.RESET)) (PROP (MAKEFILE-ENVIRONMENT FILETYPE) SEDIT-COMPILE)))(* ;; "Hack to add Compile commands to Lyric SEdit")(* ;; "Note: post-Lyric SEdit already has these commands.  Loading this file into a post-Lyric sysout is a no-op.")(DECLARE: EVAL@COMPILE DONTCOPY (FILESLOAD (LOADCOMP) SEDIT-DECLS))(CLDEFUN USERSEDIT-COMPILE (USERCONTEXT USERCHARCODE &OPTIONAL USERCLOSE?) (LET ((TYPE (FETCH (EditContext EditType) OF USERCONTEXT)) (USERNAME (FETCH (EditContext IconTitle) OF USERCONTEXT)) (CLSTRUCTURE (FETCH (EditNode Structure) OF (CLSECOND (FETCH (EditNode SubNodes) OF (FETCH (EditContext Root) OF USERCONTEXT))))) (USERPROMPT-STREAM (GETSTREAM (\\get.prompt.window USERCONTEXT) (QUOTE OUTPUT)))) (CASE TYPE ((Expression VARS PROPS RECORDS) (CLFORMAT USERPROMPT-STREAM "~%%Can't compile things of type ~S." TYPE)) (T (\\complete USERCONTEXT USERCHARCODE T) (CLFORMAT USERPROMPT-STREAM "~%%Compiling ...") (CLIF (CLCONSP (ERSETQ (LET ((*STANDARD-OUTPUT* (GETSTREAM PROMPTWINDOW) (QUOTE OUTPUT))) (DECLARE (GLOBAL PROMPTWINDOW)) (CASE TYPE (FNS (CLCOMPILE USERNAME CLSTRUCTURE)) (FUNCTIONS (CLIF (AND (CLFBOUNDP USERNAME) (NOT (CLCOMPILED-FUNCTION-P (CLSYMBOL-FUNCTION USERNAME)))) (CLCOMPILE USERNAME (CLSYMBOL-FUNCTION USERNAME)) (CLFUNCALL (CLCOMPILE NIL (BQUOTE (CLLAMBDA NIL (\, CLSTRUCTURE))))))) (T (CLFUNCALL (CLCOMPILE NIL (BQUOTE (CLLAMBDA NIL (\, CLSTRUCTURE)))))))))) (CLIF USERCLOSE? (CLOSEW (FETCH (EditContext DisplayWindow) OF USERCONTEXT)) (CLFORMAT USERPROMPT-STREAM " done.")) (CLFORMAT USERPROMPT-STREAM " aborted."))))) T)(CLDEFUN USERSEDIT-EXIT (USERCONTEXT USERCHARCODE) (CLOSEW (FETCH (EditContext DisplayWindow) OF USERCONTEXT)) T)(ADDTOVAR \\command.table.spec (USERSEDIT-COMPILE ("Compile		C-C" "Exit & compile (if editing a function)") ^C) ((USERSEDIT-COMPILE T) NIL 1,^C) ((USERSEDIT-EXIT NIL) NIL 1,^X))(SEDIT.RESET)(PUTPROPS SEDIT-COMPILE MAKEFILE-ENVIRONMENT (PACKAGE "USER"))(PUTPROPS SEDIT-COMPILE FILETYPE COMPILE-FILE)(PUTPROPS SEDIT-COMPILE COPYRIGHT ("Douglass Read Cutting" 1987))(DECLARE: DONTCOPY  (FILEMAP (NIL)))STOP